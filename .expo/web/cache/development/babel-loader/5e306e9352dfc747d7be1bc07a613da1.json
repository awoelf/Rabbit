{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport React, { Component } from 'react';\nimport PanResponder from \"react-native-web/dist/exports/PanResponder\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport { Constants, asBaseComponent } from \"../../commons/new\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport var GestureDirections;\n(function (GestureDirections) {\n  GestureDirections[\"UP\"] = \"up\";\n  GestureDirections[\"DOWN\"] = \"down\";\n})(GestureDirections || (GestureDirections = {}));\nvar SWIPE_VELOCITY = 1.8;\nvar SPEED = 20;\nvar BOUNCINESS = 6;\nvar PanGestureView = function (_Component) {\n  _inherits(PanGestureView, _Component);\n  var _super = _createSuper(PanGestureView);\n  function PanGestureView(props) {\n    var _this;\n    _classCallCheck(this, PanGestureView);\n    _this = _super.call(this, props);\n    _this.handleMoveShouldSetPanResponder = function (_e, gestureState) {\n      var dy = gestureState.dy;\n      return dy > 5 || dy < -5;\n    };\n    _this.handlePanResponderGrant = function () {\n      _this.swipe = false;\n    };\n    _this.handlePanResponderMove = function (_e, gestureState) {\n      var direction = _this.props.direction;\n      var newValue = 0;\n      var up = direction === GestureDirections.UP;\n      var panDeltaY = gestureState.dy;\n      var panVelocityY = gestureState.vy;\n      if (Math.abs(panVelocityY) >= SWIPE_VELOCITY) {\n        if (up && panVelocityY < 0 || !up && panVelocityY > 0) {\n          _this.swipe = true;\n        }\n      } else if (up && panDeltaY < 0 || !up && panDeltaY > 0) {\n        newValue = panDeltaY;\n        _this.animateDeltaY(Math.round(newValue));\n      }\n    };\n    _this.handlePanResponderEnd = function () {\n      if (!_this.swipe) {\n        var direction = _this.props.direction;\n        var up = direction === GestureDirections.UP;\n        var deltaY = _this.state.deltaY;\n        var threshold = _this.layout.height / 2;\n        var endValue = Math.round(deltaY._value);\n        if (up && endValue <= -threshold || !up && endValue >= threshold) {\n          _this.animateDismiss();\n        } else {\n          _this.animateDeltaY(0);\n        }\n      } else {\n        _this.animateDismiss();\n      }\n    };\n    _this.onAnimatedFinished = function (_ref) {\n      var finished = _ref.finished;\n      if (finished) {\n        _this.onDismiss();\n      }\n    };\n    _this.onDismiss = function () {\n      _this.initPositions();\n      _this.props.onDismiss == null ? void 0 : _this.props.onDismiss();\n    };\n    _this.onLayout = function (event) {\n      _this.layout = event.nativeEvent.layout;\n    };\n    _this.state = {\n      deltaY: new Animated.Value(0)\n    };\n    _this.panResponder = PanResponder.create({\n      onMoveShouldSetPanResponder: _this.handleMoveShouldSetPanResponder,\n      onPanResponderGrant: _this.handlePanResponderGrant,\n      onPanResponderMove: _this.handlePanResponderMove,\n      onPanResponderRelease: _this.handlePanResponderEnd,\n      onPanResponderTerminate: _this.handlePanResponderEnd\n    });\n    return _this;\n  }\n  _createClass(PanGestureView, [{\n    key: \"animateDeltaY\",\n    value: function animateDeltaY(toValue) {\n      var deltaY = this.state.deltaY;\n      Animated.spring(deltaY, {\n        toValue: toValue,\n        useNativeDriver: true,\n        speed: SPEED,\n        bounciness: BOUNCINESS\n      }).start();\n    }\n  }, {\n    key: \"animateDismiss\",\n    value: function animateDismiss() {\n      var direction = this.props.direction;\n      var up = direction === GestureDirections.UP;\n      var deltaY = this.state.deltaY;\n      var newValue = up ? -this.layout.height - Constants.statusBarHeight : deltaY._value + Constants.screenHeight;\n      Animated.timing(deltaY, {\n        toValue: Math.round(newValue),\n        useNativeDriver: true,\n        duration: 280\n      }).start(this.onAnimatedFinished);\n    }\n  }, {\n    key: \"initPositions\",\n    value: function initPositions() {\n      this.setState({\n        deltaY: new Animated.Value(0)\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var style = this.props.style;\n      var deltaY = this.state.deltaY;\n      return _jsx(Animated.View, _objectSpread(_objectSpread({\n        style: [style, {\n          transform: [{\n            translateY: deltaY\n          }]\n        }]\n      }, this.panResponder.panHandlers), {}, {\n        onLayout: this.onLayout,\n        children: this.props.children\n      }));\n    }\n  }]);\n  return PanGestureView;\n}(Component);\nPanGestureView.displayName = 'PanGestureView';\nPanGestureView.defaultProps = {\n  direction: GestureDirections.DOWN\n};\nPanGestureView.directions = GestureDirections;\nexport default asBaseComponent(PanGestureView);","map":{"version":3,"names":["React","Component","Constants","asBaseComponent","GestureDirections","SWIPE_VELOCITY","SPEED","BOUNCINESS","PanGestureView","props","handleMoveShouldSetPanResponder","_e","gestureState","dy","handlePanResponderGrant","swipe","handlePanResponderMove","direction","newValue","up","UP","panDeltaY","panVelocityY","vy","Math","abs","animateDeltaY","round","handlePanResponderEnd","deltaY","state","threshold","layout","height","endValue","_value","animateDismiss","onAnimatedFinished","finished","onDismiss","initPositions","onLayout","event","nativeEvent","Animated","Value","panResponder","PanResponder","create","onMoveShouldSetPanResponder","onPanResponderGrant","onPanResponderMove","onPanResponderRelease","onPanResponderTerminate","toValue","spring","useNativeDriver","speed","bounciness","start","statusBarHeight","screenHeight","timing","duration","setState","style","transform","translateY","panHandlers","children","displayName","defaultProps","DOWN","directions"],"sources":["C:/Users/Alex/Documents/development/Rabbit/node_modules/react-native-ui-lib/src/components/panningViews/panGestureView.js"],"sourcesContent":["import React, { Component } from 'react';\nimport { PanResponder, Animated } from 'react-native';\nimport { Constants, asBaseComponent } from \"../../commons/new\";\nexport let GestureDirections;\n(function (GestureDirections) {\n  GestureDirections[\"UP\"] = \"up\";\n  GestureDirections[\"DOWN\"] = \"down\";\n})(GestureDirections || (GestureDirections = {}));\nconst SWIPE_VELOCITY = 1.8;\nconst SPEED = 20;\nconst BOUNCINESS = 6;\n/**\n * @description: PanGestureView component for drag and swipe gestures (supports only vertical gestures at the moment)\n */\nclass PanGestureView extends Component {\n  static displayName = 'PanGestureView';\n  static defaultProps = {\n    direction: GestureDirections.DOWN\n  };\n  static directions = GestureDirections;\n  constructor(props) {\n    super(props);\n    this.state = {\n      deltaY: new Animated.Value(0)\n    };\n    this.panResponder = PanResponder.create({\n      onMoveShouldSetPanResponder: this.handleMoveShouldSetPanResponder,\n      onPanResponderGrant: this.handlePanResponderGrant,\n      onPanResponderMove: this.handlePanResponderMove,\n      onPanResponderRelease: this.handlePanResponderEnd,\n      onPanResponderTerminate: this.handlePanResponderEnd\n    });\n  }\n  handleMoveShouldSetPanResponder = (_e, gestureState) => {\n    // return true if user is swiping, return false if it's a single click\n    const {\n      dy\n    } = gestureState;\n    return dy > 5 || dy < -5;\n  };\n  handlePanResponderGrant = () => {\n    this.swipe = false;\n  };\n  handlePanResponderMove = (_e, gestureState) => {\n    const {\n      direction\n    } = this.props;\n    let newValue = 0;\n\n    // VERTICAL\n    const up = direction === GestureDirections.UP;\n    const panDeltaY = gestureState.dy;\n    const panVelocityY = gestureState.vy;\n    if (Math.abs(panVelocityY) >= SWIPE_VELOCITY) {\n      if (up && panVelocityY < 0 || !up && panVelocityY > 0) {\n        // Swipe\n        this.swipe = true;\n      }\n    } else if (up && panDeltaY < 0 || !up && panDeltaY > 0) {\n      // Drag\n      newValue = panDeltaY;\n      this.animateDeltaY(Math.round(newValue));\n    }\n  };\n  handlePanResponderEnd = () => {\n    if (!this.swipe) {\n      const {\n        direction\n      } = this.props;\n\n      // VERTICAL\n      const up = direction === GestureDirections.UP;\n      const {\n        deltaY\n      } = this.state;\n      // @ts-ignore\n      const threshold = this.layout.height / 2;\n      // @ts-ignore\n      const endValue = Math.round(deltaY._value);\n      if (up && endValue <= -threshold || !up && endValue >= threshold) {\n        this.animateDismiss();\n      } else {\n        // back to initial position\n        this.animateDeltaY(0);\n      }\n    } else {\n      this.animateDismiss();\n    }\n  };\n  animateDeltaY(toValue) {\n    const {\n      deltaY\n    } = this.state;\n    Animated.spring(deltaY, {\n      toValue,\n      useNativeDriver: true,\n      speed: SPEED,\n      bounciness: BOUNCINESS\n    }).start();\n  }\n  animateDismiss() {\n    const {\n      direction\n    } = this.props;\n\n    // VERTICAL\n    const up = direction === GestureDirections.UP;\n    const {\n      deltaY\n    } = this.state;\n    // @ts-ignore\n    const newValue = up ? -this.layout.height - Constants.statusBarHeight : deltaY._value + Constants.screenHeight;\n    Animated.timing(deltaY, {\n      toValue: Math.round(newValue),\n      useNativeDriver: true,\n      duration: 280\n    }).start(this.onAnimatedFinished);\n  }\n  onAnimatedFinished = ({\n    finished\n  }) => {\n    if (finished) {\n      this.onDismiss();\n    }\n  };\n  onDismiss = () => {\n    this.initPositions();\n    this.props.onDismiss?.();\n  };\n  initPositions() {\n    this.setState({\n      deltaY: new Animated.Value(0)\n    });\n  }\n  onLayout = event => {\n    this.layout = event.nativeEvent.layout;\n  };\n  render() {\n    const {\n      style\n    } = this.props;\n\n    // VERTICAL\n    const {\n      deltaY\n    } = this.state;\n    return <Animated.View style={[style, {\n      transform: [{\n        translateY: deltaY\n      }]\n    }]} {...this.panResponder.panHandlers} onLayout={this.onLayout}>\n        {this.props.children}\n      </Animated.View>;\n  }\n}\nexport default asBaseComponent(PanGestureView);"],"mappings":"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"},"metadata":{},"sourceType":"module"}