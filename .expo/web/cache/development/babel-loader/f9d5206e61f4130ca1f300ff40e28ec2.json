{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport _isFunction from \"lodash/isFunction\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport { useCallback, useRef } from 'react';\nimport { Constants } from \"../../commons/new\";\nvar useScrollTo = function useScrollTo(props) {\n  var propsScrollViewRef = props.scrollViewRef,\n    _props$horizontal = props.horizontal,\n    horizontal = _props$horizontal === void 0 ? true : _props$horizontal;\n  var newScrollViewRef = useRef(null);\n  var scrollViewRef = propsScrollViewRef || newScrollViewRef;\n  var contentSize = useRef(undefined);\n  var containerSize = useRef(undefined);\n  var onContentSizeChange = useCallback(function (contentWidth, contentHeight) {\n    contentSize.current = horizontal ? contentWidth : contentHeight;\n  }, [horizontal]);\n  var onLayout = useCallback(function (event) {\n    var _event$nativeEvent$la = event.nativeEvent.layout,\n      width = _event$nativeEvent$la.width,\n      height = _event$nativeEvent$la.height;\n    containerSize.current = horizontal ? width : height;\n  }, [horizontal]);\n  var scrollTo = useCallback(function (offset) {\n    var _scrollViewRef$curren, _scrollViewRef$curren2;\n    var animated = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n    if (horizontal && Constants.isRTL && Constants.isAndroid && !_isUndefined(contentSize.current) && !_isUndefined(containerSize.current)) {\n      var scrollingWidth = Math.max(0, contentSize.current - containerSize.current);\n      offset = scrollingWidth - offset;\n    }\n    if (_isFunction((_scrollViewRef$curren = scrollViewRef.current) == null ? void 0 : _scrollViewRef$curren.scrollToOffset)) {\n      scrollViewRef.current.scrollToOffset({\n        offset: offset,\n        animated: animated\n      });\n    } else if (_isFunction((_scrollViewRef$curren2 = scrollViewRef.current) == null ? void 0 : _scrollViewRef$curren2.scrollTo)) {\n      var scrollToXY = horizontal ? {\n        x: offset\n      } : {\n        y: offset\n      };\n      scrollViewRef.current.scrollTo(_objectSpread(_objectSpread({}, scrollToXY), {}, {\n        animated: animated\n      }));\n    }\n  }, [scrollViewRef, horizontal]);\n  return {\n    scrollViewRef: scrollViewRef,\n    scrollTo: scrollTo,\n    onContentSizeChange: onContentSizeChange,\n    onLayout: onLayout\n  };\n};\nexport default useScrollTo;","map":{"version":3,"names":["_isFunction","_isUndefined","useCallback","useRef","Constants","useScrollTo","props","propsScrollViewRef","scrollViewRef","horizontal","newScrollViewRef","contentSize","undefined","containerSize","onContentSizeChange","contentWidth","contentHeight","current","onLayout","event","nativeEvent","layout","width","height","scrollTo","offset","animated","isRTL","isAndroid","scrollingWidth","Math","max","scrollToOffset","scrollToXY","x","y"],"sources":["C:/Users/Alex/Documents/development/Rabbit/node_modules/react-native-ui-lib/src/hooks/useScrollTo/index.js"],"sourcesContent":["import _isFunction from \"lodash/isFunction\";\nimport _isUndefined from \"lodash/isUndefined\";\nimport { useCallback, useRef } from 'react';\nimport { Constants } from \"../../commons/new\";\nconst useScrollTo = props => {\n  const {\n    scrollViewRef: propsScrollViewRef,\n    horizontal = true\n  } = props;\n  const newScrollViewRef = useRef(null);\n  const scrollViewRef = propsScrollViewRef || newScrollViewRef;\n  const contentSize = useRef(undefined);\n  const containerSize = useRef(undefined);\n  const onContentSizeChange = useCallback((contentWidth, contentHeight) => {\n    contentSize.current = horizontal ? contentWidth : contentHeight;\n  }, [horizontal]);\n  const onLayout = useCallback(event => {\n    const {\n      nativeEvent: {\n        layout: {\n          width,\n          height\n        }\n      }\n    } = event;\n    containerSize.current = horizontal ? width : height;\n  }, [horizontal]);\n  const scrollTo = useCallback((offset, animated = true) => {\n    if (horizontal && Constants.isRTL && Constants.isAndroid && !_isUndefined(contentSize.current) && !_isUndefined(containerSize.current)) {\n      const scrollingWidth = Math.max(0, contentSize.current - containerSize.current);\n      offset = scrollingWidth - offset;\n    }\n\n    // @ts-ignore\n    if (_isFunction(scrollViewRef.current?.scrollToOffset)) {\n      // @ts-ignore\n      scrollViewRef.current.scrollToOffset({\n        offset,\n        animated\n      });\n      // @ts-ignore\n    } else if (_isFunction(scrollViewRef.current?.scrollTo)) {\n      const scrollToXY = horizontal ? {\n        x: offset\n      } : {\n        y: offset\n      };\n      // @ts-ignore\n      scrollViewRef.current.scrollTo({\n        ...scrollToXY,\n        animated\n      });\n    }\n  }, [scrollViewRef, horizontal]);\n  return {\n    scrollViewRef,\n    scrollTo,\n    onContentSizeChange,\n    onLayout\n  };\n};\nexport default useScrollTo;"],"mappings":";;;AAAA,OAAOA,WAAW,MAAM,mBAAmB;AAC3C,OAAOC,YAAY,MAAM,oBAAoB;AAC7C,SAASC,WAAW,EAAEC,MAAM,QAAQ,OAAO;AAC3C,SAASC,SAAS;AAClB,IAAMC,WAAW,GAAG,SAAdA,WAAW,CAAGC,KAAK,EAAI;EAC3B,IACiBC,kBAAkB,GAE/BD,KAAK,CAFPE,aAAa;IAAA,oBAEXF,KAAK,CADPG,UAAU;IAAVA,UAAU,kCAAG,IAAI;EAEnB,IAAMC,gBAAgB,GAAGP,MAAM,CAAC,IAAI,CAAC;EACrC,IAAMK,aAAa,GAAGD,kBAAkB,IAAIG,gBAAgB;EAC5D,IAAMC,WAAW,GAAGR,MAAM,CAACS,SAAS,CAAC;EACrC,IAAMC,aAAa,GAAGV,MAAM,CAACS,SAAS,CAAC;EACvC,IAAME,mBAAmB,GAAGZ,WAAW,CAAC,UAACa,YAAY,EAAEC,aAAa,EAAK;IACvEL,WAAW,CAACM,OAAO,GAAGR,UAAU,GAAGM,YAAY,GAAGC,aAAa;EACjE,CAAC,EAAE,CAACP,UAAU,CAAC,CAAC;EAChB,IAAMS,QAAQ,GAAGhB,WAAW,CAAC,UAAAiB,KAAK,EAAI;IACpC,4BAOIA,KAAK,CANPC,WAAW,CACTC,MAAM;MACJC,KAAK,yBAALA,KAAK;MACLC,MAAM,yBAANA,MAAM;IAIZV,aAAa,CAACI,OAAO,GAAGR,UAAU,GAAGa,KAAK,GAAGC,MAAM;EACrD,CAAC,EAAE,CAACd,UAAU,CAAC,CAAC;EAChB,IAAMe,QAAQ,GAAGtB,WAAW,CAAC,UAACuB,MAAM,EAAsB;IAAA;IAAA,IAApBC,QAAQ,uEAAG,IAAI;IACnD,IAAIjB,UAAU,IAAIL,SAAS,CAACuB,KAAK,IAAIvB,SAAS,CAACwB,SAAS,IAAI,CAAC3B,YAAY,CAACU,WAAW,CAACM,OAAO,CAAC,IAAI,CAAChB,YAAY,CAACY,aAAa,CAACI,OAAO,CAAC,EAAE;MACtI,IAAMY,cAAc,GAAGC,IAAI,CAACC,GAAG,CAAC,CAAC,EAAEpB,WAAW,CAACM,OAAO,GAAGJ,aAAa,CAACI,OAAO,CAAC;MAC/EQ,MAAM,GAAGI,cAAc,GAAGJ,MAAM;IAClC;IAGA,IAAIzB,WAAW,0BAACQ,aAAa,CAACS,OAAO,qBAArB,sBAAuBe,cAAc,CAAC,EAAE;MAEtDxB,aAAa,CAACS,OAAO,CAACe,cAAc,CAAC;QACnCP,MAAM,EAANA,MAAM;QACNC,QAAQ,EAARA;MACF,CAAC,CAAC;IAEJ,CAAC,MAAM,IAAI1B,WAAW,2BAACQ,aAAa,CAACS,OAAO,qBAArB,uBAAuBO,QAAQ,CAAC,EAAE;MACvD,IAAMS,UAAU,GAAGxB,UAAU,GAAG;QAC9ByB,CAAC,EAAET;MACL,CAAC,GAAG;QACFU,CAAC,EAAEV;MACL,CAAC;MAEDjB,aAAa,CAACS,OAAO,CAACO,QAAQ,iCACzBS,UAAU;QACbP,QAAQ,EAARA;MAAQ,GACR;IACJ;EACF,CAAC,EAAE,CAAClB,aAAa,EAAEC,UAAU,CAAC,CAAC;EAC/B,OAAO;IACLD,aAAa,EAAbA,aAAa;IACbgB,QAAQ,EAARA,QAAQ;IACRV,mBAAmB,EAAnBA,mBAAmB;IACnBI,QAAQ,EAARA;EACF,CAAC;AACH,CAAC;AACD,eAAeb,WAAW"},"metadata":{},"sourceType":"module"}