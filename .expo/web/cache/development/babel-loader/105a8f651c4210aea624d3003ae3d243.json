{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport React, { Component } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Animated, { Easing as _Easing, EasingNode } from 'react-native-reanimated';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport TouchableOpacity from \"../touchableOpacity\";\nimport { Colors } from \"../../style\";\nimport ShareTransitionContext from \"./ShareTransitionContext\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar _interpolate = Animated.interpolate,\n  interpolateNode = Animated.interpolateNode;\nvar Easing = EasingNode || _Easing;\nvar interpolate = interpolateNode || _interpolate;\nvar SharedArea = function (_Component) {\n  _inherits(SharedArea, _Component);\n  var _super = _createSuper(SharedArea);\n  function SharedArea() {\n    var _this;\n    _classCallCheck(this, SharedArea);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.displayName = 'IGNORE';\n    _this.state = {};\n    _this.transition = new Animated.Value(0);\n    _this.setSharedData = function (data) {\n      _this.setState({\n        data: data\n      });\n    };\n    _this.setSource = function (sourceLayout, element) {\n      _this.setState({\n        sourceLayout: sourceLayout,\n        element: element,\n        showDetails: true\n      }, function () {\n        _this.startTransition(true);\n      });\n    };\n    _this.setTarget = function (targetLayout) {\n      _this.setState({\n        targetLayout: targetLayout\n      });\n    };\n    _this.clearSource = function () {\n      _this.startTransition(false, function () {\n        _this.setState({\n          showDetails: false,\n          data: undefined,\n          sourceLayout: undefined,\n          element: undefined\n        });\n      });\n    };\n    return _this;\n  }\n  _createClass(SharedArea, [{\n    key: \"getProviderContextValue\",\n    value: function getProviderContextValue() {\n      var showDetails = this.state.showDetails;\n      return {\n        setSharedData: this.setSharedData,\n        setSource: this.setSource,\n        setTarget: this.setTarget,\n        showDetails: showDetails\n      };\n    }\n  }, {\n    key: \"getOverlayStyle\",\n    value: function getOverlayStyle() {\n      return _objectSpread(_objectSpread({}, StyleSheet.absoluteFillObject), {}, {\n        backgroundColor: Colors.white,\n        opacity: interpolate(this.transition, {\n          inputRange: [0, 1],\n          outputRange: [0, 1]\n        })\n      });\n    }\n  }, {\n    key: \"getDetailsStyle\",\n    value: function getDetailsStyle() {\n      return _objectSpread(_objectSpread({}, StyleSheet.absoluteFillObject), {}, {\n        opacity: interpolate(this.transition, {\n          inputRange: [90, 100],\n          outputRange: [0, 1]\n        })\n      });\n    }\n  }, {\n    key: \"getElementStyle\",\n    value: function getElementStyle() {\n      var _this$state = this.state,\n        sourceLayout = _this$state.sourceLayout,\n        targetLayout = _this$state.targetLayout;\n      if (sourceLayout && this.transition) {\n        return {\n          position: 'absolute',\n          width: interpolate(this.transition, {\n            inputRange: [0, 100],\n            outputRange: [sourceLayout.width, targetLayout.width]\n          }),\n          height: interpolate(this.transition, {\n            inputRange: [0, 100],\n            outputRange: [sourceLayout.height, targetLayout.height]\n          }),\n          top: interpolate(this.transition, {\n            inputRange: [0, 100],\n            outputRange: [sourceLayout.y, targetLayout.y]\n          }),\n          left: interpolate(this.transition, {\n            inputRange: [0, 100],\n            outputRange: [sourceLayout.x, targetLayout.x]\n          })\n        };\n      }\n    }\n  }, {\n    key: \"startTransition\",\n    value: function startTransition(show, onAnimationEnd) {\n      Animated.timing(this.transition, {\n        toValue: show ? 100 : 0,\n        duration: 600,\n        easing: Easing.bezier(0.19, 1, 0.22, 1),\n        useNativeDriver: false\n      }).start(onAnimationEnd);\n    }\n  }, {\n    key: \"renderDetailsOverlay\",\n    value: function renderDetailsOverlay() {\n      var renderDetails = this.props.renderDetails;\n      var _this$state2 = this.state,\n        data = _this$state2.data,\n        element = _this$state2.element;\n      return _jsxs(Animated.View, {\n        pointerEvents: data ? 'auto' : 'none',\n        style: this.getOverlayStyle(),\n        children: [_jsx(Animated.View, {\n          pointerEvents: \"box-none\",\n          style: this.getDetailsStyle(),\n          children: renderDetails(data)\n        }), _jsx(Animated.View, {\n          style: this.getElementStyle(),\n          children: _jsx(TouchableOpacity, {\n            activeOpacity: 1,\n            onPress: this.clearSource,\n            style: {\n              flex: 1\n            },\n            children: element\n          })\n        })]\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      return _jsxs(ShareTransitionContext.Provider, {\n        value: this.getProviderContextValue(),\n        children: [this.props.children, this.renderDetailsOverlay()]\n      });\n    }\n  }]);\n  return SharedArea;\n}(Component);\nSharedArea.propTypes = {\n  renderDetails: PropTypes.elementType\n};\nSharedArea.defaultProps = {\n  renderDetails: _.noop\n};\nexport default SharedArea;","map":{"version":3,"names":["React","Component","Animated","Easing","_Easing","EasingNode","PropTypes","_","TouchableOpacity","Colors","ShareTransitionContext","_interpolate","interpolate","interpolateNode","SharedArea","displayName","state","transition","Value","setSharedData","data","setState","setSource","sourceLayout","element","showDetails","startTransition","setTarget","targetLayout","clearSource","undefined","StyleSheet","absoluteFillObject","backgroundColor","white","opacity","inputRange","outputRange","position","width","height","top","y","left","x","show","onAnimationEnd","timing","toValue","duration","easing","bezier","useNativeDriver","start","renderDetails","props","getOverlayStyle","getDetailsStyle","getElementStyle","flex","getProviderContextValue","children","renderDetailsOverlay","propTypes","elementType","defaultProps","noop"],"sources":["C:/Users/Alex/Documents/development/Rabbit/node_modules/react-native-ui-lib/src/components/sharedTransition/SharedArea.js"],"sourcesContent":["import React, {Component} from 'react';\nimport {StyleSheet} from 'react-native';\nimport Animated, {Easing as _Easing, EasingNode} from 'react-native-reanimated';\nimport PropTypes from 'prop-types';\nimport _ from 'lodash';\nimport TouchableOpacity from '../touchableOpacity';\nimport {Colors} from '../../style';\nimport ShareTransitionContext from './ShareTransitionContext';\n\nconst {interpolate: _interpolate, interpolateNode} = Animated;\nconst Easing = EasingNode || _Easing;\nconst interpolate = interpolateNode || _interpolate;\n\nclass SharedArea extends Component {\n  displayName = 'IGNORE';\n  static propTypes = {\n    /**\n     * render details screen\n     */\n    renderDetails: PropTypes.elementType\n  };\n\n  static defaultProps = {\n    renderDetails: _.noop\n  };\n\n  state = {};\n  transition = new Animated.Value(0);\n\n  getProviderContextValue() {\n    const {showDetails} = this.state;\n    return {\n      setSharedData: this.setSharedData,\n      setSource: this.setSource,\n      setTarget: this.setTarget,\n      showDetails\n    };\n  }\n\n  getOverlayStyle() {\n    return {\n      ...StyleSheet.absoluteFillObject,\n      backgroundColor: Colors.white,\n      opacity: interpolate(this.transition, {inputRange: [0, 1], outputRange: [0, 1]})\n    };\n  }\n\n  getDetailsStyle() {\n    return {\n      ...StyleSheet.absoluteFillObject,\n      opacity: interpolate(this.transition, {inputRange: [90, 100], outputRange: [0, 1]})\n    };\n  }\n\n  getElementStyle() {\n    const {sourceLayout, targetLayout} = this.state;\n    if (sourceLayout && this.transition) {\n      return {\n        position: 'absolute',\n        width: interpolate(this.transition, {\n          inputRange: [0, 100],\n          outputRange: [sourceLayout.width, targetLayout.width]\n        }),\n        height: interpolate(this.transition, {\n          inputRange: [0, 100],\n          outputRange: [sourceLayout.height, targetLayout.height]\n        }),\n        top: interpolate(this.transition, {\n          inputRange: [0, 100],\n          outputRange: [sourceLayout.y, targetLayout.y]\n        }),\n        left: interpolate(this.transition, {\n          inputRange: [0, 100],\n          outputRange: [sourceLayout.x, targetLayout.x]\n        })\n      };\n    }\n  }\n\n  setSharedData = data => {\n    this.setState({\n      data\n    });\n  };\n\n  setSource = (sourceLayout, element) => {\n    this.setState({\n      sourceLayout,\n      element,\n      showDetails: true\n    },\n    () => {\n      this.startTransition(true);\n    });\n  };\n\n  setTarget = targetLayout => {\n    this.setState({\n      targetLayout\n    });\n  };\n\n  clearSource = () => {\n    this.startTransition(false, () => {\n      this.setState({\n        showDetails: false,\n        data: undefined,\n        sourceLayout: undefined,\n        element: undefined\n      });\n    });\n  };\n\n  startTransition(show, onAnimationEnd) {\n    Animated.timing(this.transition, {\n      toValue: show ? 100 : 0,\n      duration: 600,\n      easing: Easing.bezier(0.19, 1, 0.22, 1),\n      useNativeDriver: false\n    }).start(onAnimationEnd);\n  }\n\n  renderDetailsOverlay() {\n    const {renderDetails} = this.props;\n    const {data, element} = this.state;\n\n    return (\n      <Animated.View pointerEvents={data ? 'auto' : 'none'} style={this.getOverlayStyle()}>\n        <Animated.View pointerEvents=\"box-none\" style={this.getDetailsStyle()}>\n          {renderDetails(data)}\n        </Animated.View>\n\n        <Animated.View style={this.getElementStyle()}>\n          <TouchableOpacity activeOpacity={1} onPress={this.clearSource} /* _style={[style]} */ style={{flex: 1}}>\n            {element}\n          </TouchableOpacity>\n        </Animated.View>\n      </Animated.View>\n    );\n  }\n\n  render() {\n    return (\n      <ShareTransitionContext.Provider value={this.getProviderContextValue()}>\n        {this.props.children}\n        {this.renderDetailsOverlay()}\n      </ShareTransitionContext.Provider>\n    );\n  }\n}\n\nexport default SharedArea;\n"],"mappings":";;;;;;;;;;AAAA,OAAOA,KAAK,IAAGC,SAAS,QAAO,OAAO;AAAC;AAEvC,OAAOC,QAAQ,IAAGC,MAAM,IAAIC,OAAO,EAAEC,UAAU,QAAO,yBAAyB;AAC/E,OAAOC,SAAS,MAAM,YAAY;AAClC,OAAOC,CAAC,MAAM,QAAQ;AACtB,OAAOC,gBAAgB;AACvB,SAAQC,MAAM;AACd,OAAOC,sBAAsB;AAAiC;AAAA;AAE9D,IAAoBC,YAAY,GAAqBT,QAAQ,CAAtDU,WAAW;EAAgBC,eAAe,GAAIX,QAAQ,CAA3BW,eAAe;AACjD,IAAMV,MAAM,GAAGE,UAAU,IAAID,OAAO;AACpC,IAAMQ,WAAW,GAAGC,eAAe,IAAIF,YAAY;AAAC,IAE9CG,UAAU;EAAA;EAAA;EAAA;IAAA;IAAA;IAAA;MAAA;IAAA;IAAA;IAAA,MACdC,WAAW,GAAG,QAAQ;IAAA,MAYtBC,KAAK,GAAG,CAAC,CAAC;IAAA,MACVC,UAAU,GAAG,IAAIf,QAAQ,CAACgB,KAAK,CAAC,CAAC,CAAC;IAAA,MAoDlCC,aAAa,GAAG,UAAAC,IAAI,EAAI;MACtB,MAAKC,QAAQ,CAAC;QACZD,IAAI,EAAJA;MACF,CAAC,CAAC;IACJ,CAAC;IAAA,MAEDE,SAAS,GAAG,UAACC,YAAY,EAAEC,OAAO,EAAK;MACrC,MAAKH,QAAQ,CAAC;QACZE,YAAY,EAAZA,YAAY;QACZC,OAAO,EAAPA,OAAO;QACPC,WAAW,EAAE;MACf,CAAC,EACD,YAAM;QACJ,MAAKC,eAAe,CAAC,IAAI,CAAC;MAC5B,CAAC,CAAC;IACJ,CAAC;IAAA,MAEDC,SAAS,GAAG,UAAAC,YAAY,EAAI;MAC1B,MAAKP,QAAQ,CAAC;QACZO,YAAY,EAAZA;MACF,CAAC,CAAC;IACJ,CAAC;IAAA,MAEDC,WAAW,GAAG,YAAM;MAClB,MAAKH,eAAe,CAAC,KAAK,EAAE,YAAM;QAChC,MAAKL,QAAQ,CAAC;UACZI,WAAW,EAAE,KAAK;UAClBL,IAAI,EAAEU,SAAS;UACfP,YAAY,EAAEO,SAAS;UACvBN,OAAO,EAAEM;QACX,CAAC,CAAC;MACJ,CAAC,CAAC;IACJ,CAAC;IAAA;EAAA;EAAA;IAAA;IAAA,OAlFD,mCAA0B;MACxB,IAAOL,WAAW,GAAI,IAAI,CAACT,KAAK,CAAzBS,WAAW;MAClB,OAAO;QACLN,aAAa,EAAE,IAAI,CAACA,aAAa;QACjCG,SAAS,EAAE,IAAI,CAACA,SAAS;QACzBK,SAAS,EAAE,IAAI,CAACA,SAAS;QACzBF,WAAW,EAAXA;MACF,CAAC;IACH;EAAC;IAAA;IAAA,OAED,2BAAkB;MAChB,uCACKM,UAAU,CAACC,kBAAkB;QAChCC,eAAe,EAAExB,MAAM,CAACyB,KAAK;QAC7BC,OAAO,EAAEvB,WAAW,CAAC,IAAI,CAACK,UAAU,EAAE;UAACmB,UAAU,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC;UAAEC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC;QAAC,CAAC;MAAC;IAEpF;EAAC;IAAA;IAAA,OAED,2BAAkB;MAChB,uCACKN,UAAU,CAACC,kBAAkB;QAChCG,OAAO,EAAEvB,WAAW,CAAC,IAAI,CAACK,UAAU,EAAE;UAACmB,UAAU,EAAE,CAAC,EAAE,EAAE,GAAG,CAAC;UAAEC,WAAW,EAAE,CAAC,CAAC,EAAE,CAAC;QAAC,CAAC;MAAC;IAEvF;EAAC;IAAA;IAAA,OAED,2BAAkB;MAChB,kBAAqC,IAAI,CAACrB,KAAK;QAAxCO,YAAY,eAAZA,YAAY;QAAEK,YAAY,eAAZA,YAAY;MACjC,IAAIL,YAAY,IAAI,IAAI,CAACN,UAAU,EAAE;QACnC,OAAO;UACLqB,QAAQ,EAAE,UAAU;UACpBC,KAAK,EAAE3B,WAAW,CAAC,IAAI,CAACK,UAAU,EAAE;YAClCmB,UAAU,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC;YACpBC,WAAW,EAAE,CAACd,YAAY,CAACgB,KAAK,EAAEX,YAAY,CAACW,KAAK;UACtD,CAAC,CAAC;UACFC,MAAM,EAAE5B,WAAW,CAAC,IAAI,CAACK,UAAU,EAAE;YACnCmB,UAAU,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC;YACpBC,WAAW,EAAE,CAACd,YAAY,CAACiB,MAAM,EAAEZ,YAAY,CAACY,MAAM;UACxD,CAAC,CAAC;UACFC,GAAG,EAAE7B,WAAW,CAAC,IAAI,CAACK,UAAU,EAAE;YAChCmB,UAAU,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC;YACpBC,WAAW,EAAE,CAACd,YAAY,CAACmB,CAAC,EAAEd,YAAY,CAACc,CAAC;UAC9C,CAAC,CAAC;UACFC,IAAI,EAAE/B,WAAW,CAAC,IAAI,CAACK,UAAU,EAAE;YACjCmB,UAAU,EAAE,CAAC,CAAC,EAAE,GAAG,CAAC;YACpBC,WAAW,EAAE,CAACd,YAAY,CAACqB,CAAC,EAAEhB,YAAY,CAACgB,CAAC;UAC9C,CAAC;QACH,CAAC;MACH;IACF;EAAC;IAAA;IAAA,OAoCD,yBAAgBC,IAAI,EAAEC,cAAc,EAAE;MACpC5C,QAAQ,CAAC6C,MAAM,CAAC,IAAI,CAAC9B,UAAU,EAAE;QAC/B+B,OAAO,EAAEH,IAAI,GAAG,GAAG,GAAG,CAAC;QACvBI,QAAQ,EAAE,GAAG;QACbC,MAAM,EAAE/C,MAAM,CAACgD,MAAM,CAAC,IAAI,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;QACvCC,eAAe,EAAE;MACnB,CAAC,CAAC,CAACC,KAAK,CAACP,cAAc,CAAC;IAC1B;EAAC;IAAA;IAAA,OAED,gCAAuB;MACrB,IAAOQ,aAAa,GAAI,IAAI,CAACC,KAAK,CAA3BD,aAAa;MACpB,mBAAwB,IAAI,CAACtC,KAAK;QAA3BI,IAAI,gBAAJA,IAAI;QAAEI,OAAO,gBAAPA,OAAO;MAEpB,OACE,MAAC,QAAQ,CAAC,IAAI;QAAC,aAAa,EAAEJ,IAAI,GAAG,MAAM,GAAG,MAAO;QAAC,KAAK,EAAE,IAAI,CAACoC,eAAe,EAAG;QAAA,WAClF,KAAC,QAAQ,CAAC,IAAI;UAAC,aAAa,EAAC,UAAU;UAAC,KAAK,EAAE,IAAI,CAACC,eAAe,EAAG;UAAA,UACnEH,aAAa,CAAClC,IAAI;QAAC,EACN,EAEhB,KAAC,QAAQ,CAAC,IAAI;UAAC,KAAK,EAAE,IAAI,CAACsC,eAAe,EAAG;UAAA,UAC3C,KAAC,gBAAgB;YAAC,aAAa,EAAE,CAAE;YAAC,OAAO,EAAE,IAAI,CAAC7B,WAAY;YAAwB,KAAK,EAAE;cAAC8B,IAAI,EAAE;YAAC,CAAE;YAAA,UACpGnC;UAAO;QACS,EACL;MAAA,EACF;IAEpB;EAAC;IAAA;IAAA,OAED,kBAAS;MACP,OACE,MAAC,sBAAsB,CAAC,QAAQ;QAAC,KAAK,EAAE,IAAI,CAACoC,uBAAuB,EAAG;QAAA,WACpE,IAAI,CAACL,KAAK,CAACM,QAAQ,EACnB,IAAI,CAACC,oBAAoB,EAAE;MAAA,EACI;IAEtC;EAAC;EAAA;AAAA,EAvIsB7D,SAAS;AAA5Ba,UAAU,CAEPiD,SAAS,GAAG;EAIjBT,aAAa,EAAEhD,SAAS,CAAC0D;AAC3B,CAAC;AAPGlD,UAAU,CASPmD,YAAY,GAAG;EACpBX,aAAa,EAAE/C,CAAC,CAAC2D;AACnB,CAAC;AA+HH,eAAepD,UAAU"},"metadata":{},"sourceType":"module"}