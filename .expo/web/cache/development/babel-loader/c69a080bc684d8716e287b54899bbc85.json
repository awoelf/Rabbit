{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _xor from \"lodash/xor\";\nimport _xorBy from \"lodash/xorBy\";\nimport { useCallback, useState, useEffect } from 'react';\nimport { PickerModes } from \"../types\";\nvar usePickerSelection = function usePickerSelection(props) {\n  var migrate = props.migrate,\n    value = props.value,\n    onChange = props.onChange,\n    topBarProps = props.topBarProps,\n    pickerExpandableRef = props.pickerExpandableRef,\n    getItemValue = props.getItemValue,\n    setSearchValue = props.setSearchValue,\n    mode = props.mode;\n  var _useState = useState(value),\n    _useState2 = _slicedToArray(_useState, 2),\n    multiDraftValue = _useState2[0],\n    setMultiDraftValue = _useState2[1];\n  var _useState3 = useState(value),\n    _useState4 = _slicedToArray(_useState3, 2),\n    multiFinalValue = _useState4[0],\n    setMultiFinalValue = _useState4[1];\n  useEffect(function () {\n    if (mode === PickerModes.MULTI && multiFinalValue !== value) {\n      setMultiDraftValue(value);\n      setMultiFinalValue(value);\n    }\n  }, [value]);\n  var onDoneSelecting = useCallback(function (item) {\n    var _pickerExpandableRef$;\n    setSearchValue('');\n    setMultiFinalValue(item);\n    (_pickerExpandableRef$ = pickerExpandableRef.current) == null ? void 0 : _pickerExpandableRef$.closeExpandable == null ? void 0 : _pickerExpandableRef$.closeExpandable();\n    onChange == null ? void 0 : onChange(item);\n  }, [onChange]);\n  var toggleItemSelection = useCallback(function (item) {\n    var newValue;\n    var itemAsArray = [item];\n    if (!migrate) {\n      newValue = _xorBy(multiDraftValue, itemAsArray, getItemValue || 'value');\n    } else {\n      newValue = _xor(multiDraftValue, itemAsArray);\n    }\n    setMultiDraftValue(newValue);\n  }, [multiDraftValue, getItemValue]);\n  var cancelSelect = useCallback(function () {\n    var _pickerExpandableRef$2;\n    setSearchValue('');\n    setMultiDraftValue(multiFinalValue);\n    (_pickerExpandableRef$2 = pickerExpandableRef.current) == null ? void 0 : _pickerExpandableRef$2.closeExpandable == null ? void 0 : _pickerExpandableRef$2.closeExpandable();\n    topBarProps == null ? void 0 : topBarProps.onCancel == null ? void 0 : topBarProps.onCancel();\n  }, [multiFinalValue, topBarProps]);\n  return {\n    multiDraftValue: multiDraftValue,\n    onDoneSelecting: onDoneSelecting,\n    toggleItemSelection: toggleItemSelection,\n    cancelSelect: cancelSelect\n  };\n};\nexport default usePickerSelection;","map":{"version":3,"names":["_xor","_xorBy","useCallback","useState","useEffect","PickerModes","usePickerSelection","props","migrate","value","onChange","topBarProps","pickerExpandableRef","getItemValue","setSearchValue","mode","multiDraftValue","setMultiDraftValue","multiFinalValue","setMultiFinalValue","MULTI","onDoneSelecting","item","current","closeExpandable","toggleItemSelection","newValue","itemAsArray","cancelSelect","onCancel"],"sources":["C:/Users/Alex/Documents/development/Rabbit/node_modules/react-native-ui-lib/src/components/picker/helpers/usePickerSelection.js"],"sourcesContent":["import _xor from \"lodash/xor\";\nimport _xorBy from \"lodash/xorBy\";\nimport { useCallback, useState, useEffect } from 'react';\nimport { PickerModes } from \"../types\";\nconst usePickerSelection = props => {\n  const {\n    migrate,\n    value,\n    onChange,\n    topBarProps,\n    pickerExpandableRef,\n    getItemValue,\n    setSearchValue,\n    mode\n  } = props;\n  const [multiDraftValue, setMultiDraftValue] = useState(value);\n  const [multiFinalValue, setMultiFinalValue] = useState(value);\n  useEffect(() => {\n    if (mode === PickerModes.MULTI && multiFinalValue !== value) {\n      setMultiDraftValue(value);\n      setMultiFinalValue(value);\n    }\n  }, [value]);\n  const onDoneSelecting = useCallback(item => {\n    setSearchValue('');\n    setMultiFinalValue(item);\n    pickerExpandableRef.current?.closeExpandable?.();\n    onChange?.(item);\n  }, [onChange]);\n  const toggleItemSelection = useCallback(item => {\n    let newValue;\n    const itemAsArray = [item];\n    if (!migrate) {\n      newValue = _xorBy(multiDraftValue, itemAsArray, getItemValue || 'value');\n    } else {\n      newValue = _xor(multiDraftValue, itemAsArray);\n    }\n    setMultiDraftValue(newValue);\n  }, [multiDraftValue, getItemValue]);\n  const cancelSelect = useCallback(() => {\n    setSearchValue('');\n    setMultiDraftValue(multiFinalValue);\n    pickerExpandableRef.current?.closeExpandable?.();\n    topBarProps?.onCancel?.();\n  }, [multiFinalValue, topBarProps]);\n  return {\n    multiDraftValue,\n    onDoneSelecting,\n    toggleItemSelection,\n    cancelSelect\n  };\n};\nexport default usePickerSelection;"],"mappings":";AAAA,OAAOA,IAAI,MAAM,YAAY;AAC7B,OAAOC,MAAM,MAAM,cAAc;AACjC,SAASC,WAAW,EAAEC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AACxD,SAASC,WAAW;AACpB,IAAMC,kBAAkB,GAAG,SAArBA,kBAAkB,CAAGC,KAAK,EAAI;EAClC,IACEC,OAAO,GAQLD,KAAK,CARPC,OAAO;IACPC,KAAK,GAOHF,KAAK,CAPPE,KAAK;IACLC,QAAQ,GAMNH,KAAK,CANPG,QAAQ;IACRC,WAAW,GAKTJ,KAAK,CALPI,WAAW;IACXC,mBAAmB,GAIjBL,KAAK,CAJPK,mBAAmB;IACnBC,YAAY,GAGVN,KAAK,CAHPM,YAAY;IACZC,cAAc,GAEZP,KAAK,CAFPO,cAAc;IACdC,IAAI,GACFR,KAAK,CADPQ,IAAI;EAEN,gBAA8CZ,QAAQ,CAACM,KAAK,CAAC;IAAA;IAAtDO,eAAe;IAAEC,kBAAkB;EAC1C,iBAA8Cd,QAAQ,CAACM,KAAK,CAAC;IAAA;IAAtDS,eAAe;IAAEC,kBAAkB;EAC1Cf,SAAS,CAAC,YAAM;IACd,IAAIW,IAAI,KAAKV,WAAW,CAACe,KAAK,IAAIF,eAAe,KAAKT,KAAK,EAAE;MAC3DQ,kBAAkB,CAACR,KAAK,CAAC;MACzBU,kBAAkB,CAACV,KAAK,CAAC;IAC3B;EACF,CAAC,EAAE,CAACA,KAAK,CAAC,CAAC;EACX,IAAMY,eAAe,GAAGnB,WAAW,CAAC,UAAAoB,IAAI,EAAI;IAAA;IAC1CR,cAAc,CAAC,EAAE,CAAC;IAClBK,kBAAkB,CAACG,IAAI,CAAC;IACxB,yBAAAV,mBAAmB,CAACW,OAAO,qBAA3B,sBAA6BC,eAAe,oBAA5C,sBAA6BA,eAAe,EAAI;IAChDd,QAAQ,oBAARA,QAAQ,CAAGY,IAAI,CAAC;EAClB,CAAC,EAAE,CAACZ,QAAQ,CAAC,CAAC;EACd,IAAMe,mBAAmB,GAAGvB,WAAW,CAAC,UAAAoB,IAAI,EAAI;IAC9C,IAAII,QAAQ;IACZ,IAAMC,WAAW,GAAG,CAACL,IAAI,CAAC;IAC1B,IAAI,CAACd,OAAO,EAAE;MACZkB,QAAQ,GAAGzB,MAAM,CAACe,eAAe,EAAEW,WAAW,EAAEd,YAAY,IAAI,OAAO,CAAC;IAC1E,CAAC,MAAM;MACLa,QAAQ,GAAG1B,IAAI,CAACgB,eAAe,EAAEW,WAAW,CAAC;IAC/C;IACAV,kBAAkB,CAACS,QAAQ,CAAC;EAC9B,CAAC,EAAE,CAACV,eAAe,EAAEH,YAAY,CAAC,CAAC;EACnC,IAAMe,YAAY,GAAG1B,WAAW,CAAC,YAAM;IAAA;IACrCY,cAAc,CAAC,EAAE,CAAC;IAClBG,kBAAkB,CAACC,eAAe,CAAC;IACnC,0BAAAN,mBAAmB,CAACW,OAAO,qBAA3B,uBAA6BC,eAAe,oBAA5C,uBAA6BA,eAAe,EAAI;IAChDb,WAAW,oBAAXA,WAAW,CAAEkB,QAAQ,oBAArBlB,WAAW,CAAEkB,QAAQ,EAAI;EAC3B,CAAC,EAAE,CAACX,eAAe,EAAEP,WAAW,CAAC,CAAC;EAClC,OAAO;IACLK,eAAe,EAAfA,eAAe;IACfK,eAAe,EAAfA,eAAe;IACfI,mBAAmB,EAAnBA,mBAAmB;IACnBG,YAAY,EAAZA;EACF,CAAC;AACH,CAAC;AACD,eAAetB,kBAAkB"},"metadata":{},"sourceType":"module"}