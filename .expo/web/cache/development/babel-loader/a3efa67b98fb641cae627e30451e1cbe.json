{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"containerStyle\", \"source\", \"loader\", \"style\", \"onLoad\", \"animationDuration\", \"testID\"];\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useState, useCallback, useMemo } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Animated, { useSharedValue, useAnimatedStyle, withTiming } from 'react-native-reanimated';\nimport View from \"../../components/view\";\nimport Image from \"../../components/image\";\nimport { useDidUpdate } from \"../../hooks\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar UIAnimatedImage = Animated.createAnimatedComponent(Image);\nvar AnimatedImage = function AnimatedImage(props) {\n  var containerStyle = props.containerStyle,\n    source = props.source,\n    loader = props.loader,\n    style = props.style,\n    propsOnLoad = props.onLoad,\n    _props$animationDurat = props.animationDuration,\n    animationDuration = _props$animationDurat === void 0 ? 300 : _props$animationDurat,\n    testID = props.testID,\n    others = _objectWithoutProperties(props, _excluded);\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    isLoading = _useState2[0],\n    setIsLoading = _useState2[1];\n  var opacity = useSharedValue(0);\n  useDidUpdate(function () {\n    if (!loader) {\n      opacity.value = 1;\n    }\n  }, [loader]);\n  var onLoad = useCallback(function (event) {\n    setIsLoading(false);\n    propsOnLoad == null ? void 0 : propsOnLoad(event);\n    if (opacity.value === 0) {\n      opacity.value = withTiming(1, {\n        duration: animationDuration\n      });\n    }\n  }, [setIsLoading, propsOnLoad, animationDuration]);\n  var fadeInStyle = useAnimatedStyle(function () {\n    var _f = function _f() {\n      return {\n        opacity: opacity.value\n      };\n    };\n    _f._closure = {\n      opacity: opacity\n    };\n    _f.asString = \"function _f(){const{opacity}=jsThis._closure;{return{opacity:opacity.value};}}\";\n    _f.__workletHash = 1880562015862;\n    _f.__location = \"C:\\\\Users\\\\Alex\\\\Documents\\\\development\\\\Rabbit\\\\node_modules\\\\react-native-ui-lib\\\\src\\\\components\\\\animatedImage\\\\index.js (45:39)\";\n    _f.__optimalization = 3;\n    return _f;\n  }());\n  var _style = useMemo(function () {\n    return [style, fadeInStyle];\n  }, [style]);\n  return _jsxs(View, {\n    style: containerStyle,\n    children: [_jsx(UIAnimatedImage, _objectSpread(_objectSpread({}, others), {}, {\n      style: _style,\n      source: source,\n      onLoad: onLoad,\n      testID: testID\n    })), isLoading && loader && _jsx(View, {\n      style: styles.loader,\n      children: loader\n    })]\n  });\n};\nAnimatedImage.displayName = 'AnimatedImage';\nexport default AnimatedImage;\nvar styles = StyleSheet.create({\n  loader: _objectSpread(_objectSpread({}, StyleSheet.absoluteFillObject), {}, {\n    justifyContent: 'center'\n  })\n});","map":{"version":3,"names":["React","useState","useCallback","useMemo","Animated","useSharedValue","useAnimatedStyle","withTiming","View","Image","useDidUpdate","UIAnimatedImage","createAnimatedComponent","AnimatedImage","props","containerStyle","source","loader","style","propsOnLoad","onLoad","animationDuration","testID","others","isLoading","setIsLoading","opacity","value","event","duration","fadeInStyle","_style","styles","displayName","StyleSheet","create","absoluteFillObject","justifyContent"],"sources":["C:/Users/Alex/Documents/development/Rabbit/node_modules/react-native-ui-lib/src/components/animatedImage/index.js"],"sourcesContent":["// TODO: consider unify this component functionality with our Image component\nimport React, { useState, useCallback, useMemo } from 'react';\nimport { StyleSheet } from 'react-native';\nimport Animated, { useSharedValue, useAnimatedStyle, withTiming } from 'react-native-reanimated';\nimport View from \"../../components/view\";\nimport Image from \"../../components/image\";\nimport { useDidUpdate } from \"../../hooks\";\nconst UIAnimatedImage = Animated.createAnimatedComponent(Image);\n/**\n * @description: Image component that fades-in the image with animation once it's loaded\n * @extends: Animated.Image\n * @gif: https://media.giphy.com/media/l0HU7jj0ivEFyZIA0/giphy.gif\n * @example: https://github.com/wix/react-native-ui-lib/blob/master/demo/src/screens/componentScreens/AnimatedImageScreen.js\n */\nconst AnimatedImage = props => {\n  const {\n    containerStyle,\n    source,\n    loader,\n    style,\n    onLoad: propsOnLoad,\n    animationDuration = 300,\n    testID,\n    ...others\n  } = props;\n  const [isLoading, setIsLoading] = useState(true);\n  const opacity = useSharedValue(0);\n  useDidUpdate(() => {\n    if (!loader) {\n      opacity.value = 1;\n    }\n  }, [loader]);\n  const onLoad = useCallback(event => {\n    setIsLoading(false);\n    propsOnLoad?.(event);\n    // did not start the animation already\n    if (opacity.value === 0) {\n      opacity.value = withTiming(1, {\n        duration: animationDuration\n      });\n    }\n  },\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [setIsLoading, propsOnLoad, animationDuration]);\n  const fadeInStyle = useAnimatedStyle(() => {\n    return {\n      opacity: opacity.value\n    };\n  });\n\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  const _style = useMemo(() => [style, fadeInStyle], [style]);\n  return <View style={containerStyle}>\n      <UIAnimatedImage {...others} style={_style} source={source} onLoad={onLoad} testID={testID} />\n      {isLoading && loader && <View style={styles.loader}>{loader}</View>}\n    </View>;\n};\nAnimatedImage.displayName = 'AnimatedImage';\nexport default AnimatedImage;\nconst styles = StyleSheet.create({\n  loader: {\n    ...StyleSheet.absoluteFillObject,\n    justifyContent: 'center'\n  }\n});"],"mappings":";;;;;;AACA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,WAAW,EAAEC,OAAO,QAAQ,OAAO;AAAC;AAE9D,OAAOC,QAAQ,IAAIC,cAAc,EAAEC,gBAAgB,EAAEC,UAAU,QAAQ,yBAAyB;AAChG,OAAOC,IAAI;AACX,OAAOC,KAAK;AACZ,SAASC,YAAY;AAAsB;AAAA;AAC3C,IAAMC,eAAe,GAAGP,QAAQ,CAACQ,uBAAuB,CAACH,KAAK,CAAC;AAO/D,IAAMI,aAAa,GAAG,SAAhBA,aAAa,CAAGC,KAAK,EAAI;EAC7B,IACEC,cAAc,GAQZD,KAAK,CARPC,cAAc;IACdC,MAAM,GAOJF,KAAK,CAPPE,MAAM;IACNC,MAAM,GAMJH,KAAK,CANPG,MAAM;IACNC,KAAK,GAKHJ,KAAK,CALPI,KAAK;IACGC,WAAW,GAIjBL,KAAK,CAJPM,MAAM;IAAA,wBAIJN,KAAK,CAHPO,iBAAiB;IAAjBA,iBAAiB,sCAAG,GAAG;IACvBC,MAAM,GAEJR,KAAK,CAFPQ,MAAM;IACHC,MAAM,4BACPT,KAAK;EACT,gBAAkCb,QAAQ,CAAC,IAAI,CAAC;IAAA;IAAzCuB,SAAS;IAAEC,YAAY;EAC9B,IAAMC,OAAO,GAAGrB,cAAc,CAAC,CAAC,CAAC;EACjCK,YAAY,CAAC,YAAM;IACjB,IAAI,CAACO,MAAM,EAAE;MACXS,OAAO,CAACC,KAAK,GAAG,CAAC;IACnB;EACF,CAAC,EAAE,CAACV,MAAM,CAAC,CAAC;EACZ,IAAMG,MAAM,GAAGlB,WAAW,CAAC,UAAA0B,KAAK,EAAI;IAClCH,YAAY,CAAC,KAAK,CAAC;IACnBN,WAAW,oBAAXA,WAAW,CAAGS,KAAK,CAAC;IAEpB,IAAIF,OAAO,CAACC,KAAK,KAAK,CAAC,EAAE;MACvBD,OAAO,CAACC,KAAK,GAAGpB,UAAU,CAAC,CAAC,EAAE;QAC5BsB,QAAQ,EAAER;MACZ,CAAC,CAAC;IACJ;EACF,CAAC,EAED,CAACI,YAAY,EAAEN,WAAW,EAAEE,iBAAiB,CAAC,CAAC;EAC/C,IAAMS,WAAW,GAAGxB,gBAAgB;IAAA,uBAAO;MACzC,OAAO;QACLoB,OAAO,EAAEA,OAAO,CAACC;MACnB,CAAC;IACH,CAAC;IAAA;MAAA,SA7CUD;IAAO;IAAA;IAAA;IAAA;IAAA;IAAA;EAAA,IA6ChB;EAGF,IAAMK,MAAM,GAAG5B,OAAO,CAAC;IAAA,OAAM,CAACe,KAAK,EAAEY,WAAW,CAAC;EAAA,GAAE,CAACZ,KAAK,CAAC,CAAC;EAC3D,OAAO,MAAC,IAAI;IAAC,KAAK,EAAEH,cAAe;IAAA,WAC/B,KAAC,eAAe,kCAAKQ,MAAM;MAAE,KAAK,EAAEQ,MAAO;MAAC,MAAM,EAAEf,MAAO;MAAC,MAAM,EAAEI,MAAO;MAAC,MAAM,EAAEE;IAAO,GAAG,EAC7FE,SAAS,IAAIP,MAAM,IAAI,KAAC,IAAI;MAAC,KAAK,EAAEe,MAAM,CAACf,MAAO;MAAA,UAAEA;IAAM,EAAQ;EAAA,EAC9D;AACX,CAAC;AACDJ,aAAa,CAACoB,WAAW,GAAG,eAAe;AAC3C,eAAepB,aAAa;AAC5B,IAAMmB,MAAM,GAAGE,UAAU,CAACC,MAAM,CAAC;EAC/BlB,MAAM,kCACDiB,UAAU,CAACE,kBAAkB;IAChCC,cAAc,EAAE;EAAQ;AAE5B,CAAC,CAAC"},"metadata":{},"sourceType":"module"}