{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport _ from 'lodash';\nimport React, { Component } from 'react';\nimport TextField from \"../textField\";\nimport PickerDialog from \"./PickerDialog\";\nimport TouchableOpacity from \"../touchableOpacity\";\nimport { Colors } from \"../../style\";\nimport { WheelPicker } from \"../../incubator\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar NativePicker = function (_Component) {\n  _inherits(NativePicker, _Component);\n  var _super = _createSuper(NativePicker);\n  function NativePicker() {\n    var _this;\n    _classCallCheck(this, NativePicker);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _super.call.apply(_super, [this].concat(args));\n    _this.state = {\n      selectedValue: _this.props.value,\n      items: _this.extractPickerItems(_this.props),\n      showDialog: false\n    };\n    _this.NUMBER_OF_ROWS = 5;\n    _this.ROW_HEIGHT = 44;\n    _this.MENU_HEIGHT = 44;\n    _this.PICKER_HEIGHT = _this.NUMBER_OF_ROWS * _this.ROW_HEIGHT + _this.MENU_HEIGHT;\n    _this.onCancel = function () {\n      _this.setState({\n        selectedValue: _this.props.value\n      });\n      _this.toggleDialog(false);\n    };\n    _this.onDone = function () {\n      var _this$state = _this.state,\n        selectedValue = _this$state.selectedValue,\n        items = _this$state.items;\n      _.invoke(_this.props, 'onChange', _.isUndefined(selectedValue) ? _.get(items, '[0].value') : selectedValue);\n      _this.toggleDialog(false);\n    };\n    _this.onValueChange = function (selectedValue) {\n      _this.setState({\n        selectedValue: selectedValue\n      });\n    };\n    _this.toggleDialog = function (showDialog) {\n      _this.setState({\n        showDialog: showDialog\n      });\n    };\n    _this.renderPicker = function () {\n      var selectedValue = _this.state.selectedValue;\n      var _this$props = _this.props,\n        children = _this$props.children,\n        renderNativePicker = _this$props.renderNativePicker,\n        pickerStyle = _this$props.pickerStyle,\n        wheelPickerProps = _this$props.wheelPickerProps,\n        testID = _this$props.testID;\n      if (_.isFunction(renderNativePicker)) {\n        return renderNativePicker(_this.props);\n      }\n      return _jsx(WheelPicker, _objectSpread(_objectSpread({\n        style: pickerStyle,\n        selectedValue: selectedValue,\n        onChange: _this.onValueChange,\n        testID: testID + \".wheelPicker\"\n      }, wheelPickerProps), {}, {\n        children: children\n      }));\n    };\n    _this.renderPickerDialog = function () {\n      var showDialog = _this.state.showDialog;\n      return _jsx(PickerDialog, _objectSpread(_objectSpread({\n        height: _this.PICKER_HEIGHT + _this.MENU_HEIGHT\n      }, _this.props), {}, {\n        visible: showDialog,\n        panDirection: null,\n        onDismiss: _this.onCancel,\n        onDone: _this.onDone,\n        onCancel: _this.onCancel,\n        children: _this.renderPicker()\n      }));\n    };\n    return _this;\n  }\n  _createClass(NativePicker, [{\n    key: \"extractPickerItems\",\n    value: function extractPickerItems(props) {\n      var children = props.children,\n        useNativePicker = props.useNativePicker;\n      if (useNativePicker) {\n        var items = React.Children.map(children, function (child) {\n          return {\n            value: child.props.value,\n            label: child.props.label\n          };\n        });\n        return items;\n      }\n    }\n  }, {\n    key: \"getLabel\",\n    value: function getLabel() {\n      var _this$props2 = this.props,\n        value = _this$props2.value,\n        getLabel = _this$props2.getLabel;\n      if (_.isFunction(getLabel)) {\n        return getLabel(value);\n      }\n      var items = this.state.items;\n      var selectedItem = _.find(items, {\n        value: value\n      });\n      return _.get(selectedItem, 'label');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n      var _this$props3 = this.props,\n        renderPicker = _this$props3.renderPicker,\n        customPickerProps = _this$props3.customPickerProps,\n        testID = _this$props3.testID;\n      if (_.isFunction(renderPicker)) {\n        var selectedValue = this.state.selectedValue;\n        return _jsxs(_Fragment, {\n          children: [_jsx(TouchableOpacity, _objectSpread(_objectSpread({}, customPickerProps), {}, {\n            link: true,\n            onPress: function onPress() {\n              return _this2.toggleDialog(true);\n            },\n            testID: testID,\n            children: renderPicker(selectedValue)\n          })), this.renderPickerDialog()]\n        });\n      }\n      var textInputProps = TextField.extractOwnProps(this.props);\n      var label = this.getLabel();\n      return _jsx(TextField, _objectSpread(_objectSpread({\n        color: Colors.$textDefault\n      }, textInputProps), {}, {\n        value: label,\n        expandable: true,\n        renderExpandable: this.renderPickerDialog,\n        onToggleExpandableModal: this.toggleDialog\n      }));\n    }\n  }]);\n  return NativePicker;\n}(Component);\nNativePicker.displayName = 'NativePicker';\nexport default NativePicker;","map":{"version":3,"names":["_","React","Component","TextField","PickerDialog","TouchableOpacity","Colors","WheelPicker","NativePicker","state","selectedValue","props","value","items","extractPickerItems","showDialog","NUMBER_OF_ROWS","ROW_HEIGHT","MENU_HEIGHT","PICKER_HEIGHT","onCancel","setState","toggleDialog","onDone","invoke","isUndefined","get","onValueChange","renderPicker","children","renderNativePicker","pickerStyle","wheelPickerProps","testID","isFunction","renderPickerDialog","useNativePicker","Children","map","child","label","getLabel","selectedItem","find","customPickerProps","textInputProps","extractOwnProps","$textDefault","displayName"],"sources":["C:/Users/Alex/Documents/development/Rabbit/node_modules/react-native-ui-lib/src/components/picker/NativePicker.js"],"sourcesContent":["import _ from 'lodash';\nimport React, {Component} from 'react';\nimport TextField from '../textField';\nimport PickerDialog from './PickerDialog';\nimport TouchableOpacity from '../touchableOpacity';\nimport {Colors} from '../../style';\nimport {WheelPicker} from '../../incubator';\n\nclass NativePicker extends Component {\n  static displayName = 'NativePicker';\n\n  state = {\n    selectedValue: this.props.value,\n    items: this.extractPickerItems(this.props),\n    showDialog: false\n  };\n\n  NUMBER_OF_ROWS = 5;\n  ROW_HEIGHT = 44;\n  MENU_HEIGHT = 44;\n  PICKER_HEIGHT = this.NUMBER_OF_ROWS * this.ROW_HEIGHT + this.MENU_HEIGHT;\n\n  extractPickerItems(props) {\n    const {children, useNativePicker} = props;\n    if (useNativePicker) {\n      const items = React.Children.map(children, child => ({value: child.props.value, label: child.props.label}));\n      return items;\n    }\n  }\n\n  onCancel = () => {\n    this.setState({\n      selectedValue: this.props.value\n    });\n    this.toggleDialog(false);\n  };\n\n  onDone = () => {\n    const {selectedValue, items} = this.state;\n    _.invoke(this.props, 'onChange', _.isUndefined(selectedValue) ? _.get(items, '[0].value') : selectedValue);\n    this.toggleDialog(false);\n  };\n\n  onValueChange = selectedValue => {\n    this.setState({\n      selectedValue\n    });\n  };\n\n  getLabel() {\n    const {value, getLabel} = this.props;\n    if (_.isFunction(getLabel)) {\n      return getLabel(value);\n    }\n\n    const {items} = this.state;\n    const selectedItem = _.find(items, {value});\n    return _.get(selectedItem, 'label');\n  }\n\n  toggleDialog = showDialog => {\n    this.setState({showDialog});\n  };\n\n  renderPicker = () => {\n    const {selectedValue} = this.state;\n    const {children, renderNativePicker, pickerStyle, wheelPickerProps, testID} = this.props;\n    if (_.isFunction(renderNativePicker)) {\n      return renderNativePicker(this.props);\n    }\n    return (\n      <WheelPicker\n        style={pickerStyle}\n        selectedValue={selectedValue}\n        onChange={this.onValueChange}\n        testID={`${testID}.wheelPicker`}\n        {...wheelPickerProps}\n      >\n        {children}\n      </WheelPicker>\n    );\n  };\n\n  renderPickerDialog = () => {\n    const {showDialog} = this.state;\n\n    return (\n      <PickerDialog\n        height={this.PICKER_HEIGHT + this.MENU_HEIGHT}\n        {...this.props}\n        visible={showDialog}\n        panDirection={null}\n        onDismiss={this.onCancel}\n        onDone={this.onDone}\n        onCancel={this.onCancel}\n      >\n        {this.renderPicker()}\n      </PickerDialog>\n    );\n  };\n\n  render() {\n    const {renderPicker, customPickerProps, testID} = this.props;\n\n    if (_.isFunction(renderPicker)) {\n      const {selectedValue} = this.state;\n      return (\n        <>\n          <TouchableOpacity {...customPickerProps} link onPress={() => this.toggleDialog(true)} testID={testID}>\n            {renderPicker(selectedValue)}\n          </TouchableOpacity>\n          {this.renderPickerDialog()}\n        </>\n      );\n    }\n\n    const textInputProps = TextField.extractOwnProps(this.props);\n    const label = this.getLabel();\n    return (\n      <TextField\n        color={Colors.$textDefault}\n        {...textInputProps}\n        value={label}\n        expandable\n        renderExpandable={this.renderPickerDialog}\n        onToggleExpandableModal={this.toggleDialog}\n      />\n    );\n  }\n}\n\n// TODO: Doesn't seem to be needed\n// NativePicker.Item = WheelPicker.Item;\nexport default NativePicker;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}