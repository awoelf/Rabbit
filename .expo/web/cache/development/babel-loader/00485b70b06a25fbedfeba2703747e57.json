{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useState, useCallback, useRef } from 'react';\nimport forwardRef from \"./forwardRef\";\nimport hoistStatics from 'hoist-non-react-statics';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nfunction withScrollEnabler(WrappedComponent) {\n  var ScrollEnabler = function ScrollEnabler(props) {\n    var _useState = useState(true),\n      _useState2 = _slicedToArray(_useState, 2),\n      scrollEnabled = _useState2[0],\n      setScrollEnabled = _useState2[1];\n    var contentSize = useRef(0);\n    var layoutSize = useRef(0);\n    var checkScroll = useCallback(function () {\n      var isScrollEnabled = Math.floor(contentSize.current) > layoutSize.current;\n      if (isScrollEnabled !== scrollEnabled) {\n        setScrollEnabled(isScrollEnabled);\n      }\n    }, [scrollEnabled]);\n    var onContentSizeChange = useCallback(function (contentWidth, contentHeight) {\n      var size = props.horizontal ? contentWidth : contentHeight;\n      if (size !== contentSize.current) {\n        contentSize.current = size;\n        if (layoutSize.current > 0) {\n          checkScroll();\n        }\n      }\n    }, [props.horizontal, checkScroll]);\n    var onLayout = useCallback(function (event) {\n      var _event$nativeEvent$la = event.nativeEvent.layout,\n        width = _event$nativeEvent$la.width,\n        height = _event$nativeEvent$la.height;\n      var size = props.horizontal ? width : height;\n      if (size !== layoutSize.current) {\n        layoutSize.current = size;\n        if (contentSize.current > 0) {\n          checkScroll();\n        }\n      }\n    }, [props.horizontal, checkScroll]);\n    return _jsx(WrappedComponent, _objectSpread(_objectSpread({}, props), {}, {\n      scrollEnablerProps: {\n        onLayout: onLayout,\n        scrollEnabled: scrollEnabled,\n        onContentSizeChange: onContentSizeChange\n      },\n      ref: props.forwardedRef\n    }));\n  };\n  hoistStatics(ScrollEnabler, WrappedComponent);\n  ScrollEnabler.displayName = WrappedComponent.displayName;\n  ScrollEnabler.propTypes = WrappedComponent.propTypes;\n  ScrollEnabler.defaultProps = WrappedComponent.defaultProps;\n  return forwardRef(ScrollEnabler);\n}\nexport default withScrollEnabler;","map":{"version":3,"names":["React","useState","useCallback","useRef","forwardRef","hoistStatics","withScrollEnabler","WrappedComponent","ScrollEnabler","props","scrollEnabled","setScrollEnabled","contentSize","layoutSize","checkScroll","isScrollEnabled","Math","floor","current","onContentSizeChange","contentWidth","contentHeight","size","horizontal","onLayout","event","nativeEvent","layout","width","height","forwardedRef","displayName","propTypes","defaultProps"],"sources":["C:/Users/Alex/Documents/development/Rabbit/node_modules/react-native-ui-lib/src/commons/withScrollEnabler.js"],"sourcesContent":["import React, { useState, useCallback, useRef } from 'react';\nimport forwardRef from \"./forwardRef\";\nimport hoistStatics from 'hoist-non-react-statics';\nfunction withScrollEnabler(WrappedComponent) {\n  const ScrollEnabler = props => {\n    const [scrollEnabled, setScrollEnabled] = useState(true);\n    const contentSize = useRef(0);\n    const layoutSize = useRef(0);\n    const checkScroll = useCallback(() => {\n      const isScrollEnabled = Math.floor(contentSize.current) > layoutSize.current;\n      if (isScrollEnabled !== scrollEnabled) {\n        setScrollEnabled(isScrollEnabled);\n      }\n    }, [scrollEnabled]);\n    const onContentSizeChange = useCallback((contentWidth, contentHeight) => {\n      const size = props.horizontal ? contentWidth : contentHeight;\n      if (size !== contentSize.current) {\n        contentSize.current = size;\n        if (layoutSize.current > 0) {\n          checkScroll();\n        }\n      }\n    }, [props.horizontal, checkScroll]);\n    const onLayout = useCallback(event => {\n      const {\n        nativeEvent: {\n          layout: {\n            width,\n            height\n          }\n        }\n      } = event;\n      const size = props.horizontal ? width : height;\n      if (size !== layoutSize.current) {\n        layoutSize.current = size;\n        if (contentSize.current > 0) {\n          checkScroll();\n        }\n      }\n    }, [props.horizontal, checkScroll]);\n    return <WrappedComponent {...props} scrollEnablerProps={{\n      onLayout,\n      scrollEnabled,\n      onContentSizeChange\n    }} ref={props.forwardedRef} />;\n  };\n  hoistStatics(ScrollEnabler, WrappedComponent);\n  ScrollEnabler.displayName = WrappedComponent.displayName;\n  //@ts-ignore\n  ScrollEnabler.propTypes = WrappedComponent.propTypes;\n  //@ts-ignore\n  ScrollEnabler.defaultProps = WrappedComponent.defaultProps;\n  return forwardRef(ScrollEnabler);\n}\nexport default withScrollEnabler;"],"mappings":";;;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,WAAW,EAAEC,MAAM,QAAQ,OAAO;AAC5D,OAAOC,UAAU;AACjB,OAAOC,YAAY,MAAM,yBAAyB;AAAC;AACnD,SAASC,iBAAiB,CAACC,gBAAgB,EAAE;EAC3C,IAAMC,aAAa,GAAG,SAAhBA,aAAa,CAAGC,KAAK,EAAI;IAC7B,gBAA0CR,QAAQ,CAAC,IAAI,CAAC;MAAA;MAAjDS,aAAa;MAAEC,gBAAgB;IACtC,IAAMC,WAAW,GAAGT,MAAM,CAAC,CAAC,CAAC;IAC7B,IAAMU,UAAU,GAAGV,MAAM,CAAC,CAAC,CAAC;IAC5B,IAAMW,WAAW,GAAGZ,WAAW,CAAC,YAAM;MACpC,IAAMa,eAAe,GAAGC,IAAI,CAACC,KAAK,CAACL,WAAW,CAACM,OAAO,CAAC,GAAGL,UAAU,CAACK,OAAO;MAC5E,IAAIH,eAAe,KAAKL,aAAa,EAAE;QACrCC,gBAAgB,CAACI,eAAe,CAAC;MACnC;IACF,CAAC,EAAE,CAACL,aAAa,CAAC,CAAC;IACnB,IAAMS,mBAAmB,GAAGjB,WAAW,CAAC,UAACkB,YAAY,EAAEC,aAAa,EAAK;MACvE,IAAMC,IAAI,GAAGb,KAAK,CAACc,UAAU,GAAGH,YAAY,GAAGC,aAAa;MAC5D,IAAIC,IAAI,KAAKV,WAAW,CAACM,OAAO,EAAE;QAChCN,WAAW,CAACM,OAAO,GAAGI,IAAI;QAC1B,IAAIT,UAAU,CAACK,OAAO,GAAG,CAAC,EAAE;UAC1BJ,WAAW,EAAE;QACf;MACF;IACF,CAAC,EAAE,CAACL,KAAK,CAACc,UAAU,EAAET,WAAW,CAAC,CAAC;IACnC,IAAMU,QAAQ,GAAGtB,WAAW,CAAC,UAAAuB,KAAK,EAAI;MACpC,4BAOIA,KAAK,CANPC,WAAW,CACTC,MAAM;QACJC,KAAK,yBAALA,KAAK;QACLC,MAAM,yBAANA,MAAM;MAIZ,IAAMP,IAAI,GAAGb,KAAK,CAACc,UAAU,GAAGK,KAAK,GAAGC,MAAM;MAC9C,IAAIP,IAAI,KAAKT,UAAU,CAACK,OAAO,EAAE;QAC/BL,UAAU,CAACK,OAAO,GAAGI,IAAI;QACzB,IAAIV,WAAW,CAACM,OAAO,GAAG,CAAC,EAAE;UAC3BJ,WAAW,EAAE;QACf;MACF;IACF,CAAC,EAAE,CAACL,KAAK,CAACc,UAAU,EAAET,WAAW,CAAC,CAAC;IACnC,OAAO,KAAC,gBAAgB,kCAAKL,KAAK;MAAE,kBAAkB,EAAE;QACtDe,QAAQ,EAARA,QAAQ;QACRd,aAAa,EAAbA,aAAa;QACbS,mBAAmB,EAAnBA;MACF,CAAE;MAAC,GAAG,EAAEV,KAAK,CAACqB;IAAa,GAAG;EAChC,CAAC;EACDzB,YAAY,CAACG,aAAa,EAAED,gBAAgB,CAAC;EAC7CC,aAAa,CAACuB,WAAW,GAAGxB,gBAAgB,CAACwB,WAAW;EAExDvB,aAAa,CAACwB,SAAS,GAAGzB,gBAAgB,CAACyB,SAAS;EAEpDxB,aAAa,CAACyB,YAAY,GAAG1B,gBAAgB,CAAC0B,YAAY;EAC1D,OAAO7B,UAAU,CAACI,aAAa,CAAC;AAClC;AACA,eAAeF,iBAAiB"},"metadata":{},"sourceType":"module"}