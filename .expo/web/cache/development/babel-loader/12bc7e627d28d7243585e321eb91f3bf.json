{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _excluded = [\"forwardedRef\"];\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nimport React from 'react';\nimport hoistStatics from 'hoist-non-react-statics';\nimport * as Modifiers from \"./modifiers\";\nimport { Scheme, ThemeManager } from \"../style\";\nimport forwardRef from \"./forwardRef\";\nimport UIComponent from \"./UIComponent\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar EMPTY_MODIFIERS = {};\nfunction asBaseComponent(WrappedComponent) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var BaseComponent = function (_UIComponent) {\n    _inherits(BaseComponent, _UIComponent);\n    var _super = _createSuper(BaseComponent);\n    function BaseComponent() {\n      var _this;\n      _classCallCheck(this, BaseComponent);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      _this = _super.call.apply(_super, [this].concat(args));\n      _this.state = {\n        error: false\n      };\n      _this.appearanceListener = function () {\n        _this.setState({\n          colorScheme: Scheme.getSchemeType()\n        });\n      };\n      return _this;\n    }\n    _createClass(BaseComponent, [{\n      key: \"componentDidMount\",\n      value: function componentDidMount() {\n        Scheme.addChangeListener(this.appearanceListener);\n      }\n    }, {\n      key: \"componentWillUnmount\",\n      value: function componentWillUnmount() {\n        Scheme.removeChangeListener(this.appearanceListener);\n      }\n    }, {\n      key: \"render\",\n      value: function render() {\n        var _UIComponent$defaultP;\n        var themeProps = options.ignoreTheme ? this.props : BaseComponent.getThemeProps(this.props, this.context);\n        var modifiers = options.ignoreModifiers ? EMPTY_MODIFIERS : Modifiers.generateModifiersStyle(options.modifiersOptions, themeProps);\n        var forwardedRef = themeProps.forwardedRef,\n          others = _objectWithoutProperties(themeProps, _excluded);\n        return this.state.error && ((_UIComponent$defaultP = UIComponent.defaultProps) == null ? void 0 : _UIComponent$defaultP.renderError) || _jsx(WrappedComponent, _objectSpread(_objectSpread({}, others), {}, {\n          modifiers: modifiers,\n          ref: forwardedRef\n        }));\n      }\n    }], [{\n      key: \"getDerivedStateFromError\",\n      value: function getDerivedStateFromError(error) {\n        var _UIComponent$defaultP2;\n        (_UIComponent$defaultP2 = UIComponent.defaultProps) == null ? void 0 : _UIComponent$defaultP2.onError == null ? void 0 : _UIComponent$defaultP2.onError(error, WrappedComponent.defaultProps);\n        return {\n          error: true\n        };\n      }\n    }]);\n    return BaseComponent;\n  }(UIComponent);\n  BaseComponent.getThemeProps = function (props, context) {\n    return Modifiers.getThemeProps.call(WrappedComponent, props, context);\n  };\n  hoistStatics(BaseComponent, WrappedComponent);\n  BaseComponent.displayName = WrappedComponent.displayName;\n  BaseComponent.propTypes = WrappedComponent.propTypes;\n  BaseComponent.defaultProps = WrappedComponent.defaultProps;\n  var ThemeContext = ThemeManager.getThemeContext();\n  if (ThemeContext) {\n    BaseComponent.contextType = ThemeContext;\n  }\n  return forwardRef(BaseComponent);\n}\nexport default asBaseComponent;","map":{"version":3,"names":["React","hoistStatics","Modifiers","Scheme","ThemeManager","forwardRef","UIComponent","EMPTY_MODIFIERS","asBaseComponent","WrappedComponent","options","BaseComponent","state","error","appearanceListener","setState","colorScheme","getSchemeType","addChangeListener","removeChangeListener","themeProps","ignoreTheme","props","getThemeProps","context","modifiers","ignoreModifiers","generateModifiersStyle","modifiersOptions","forwardedRef","others","defaultProps","renderError","onError","call","displayName","propTypes","ThemeContext","getThemeContext","contextType"],"sources":["C:/Users/Alex/Documents/development/Rabbit/node_modules/react-native-ui-lib/src/commons/asBaseComponent.js"],"sourcesContent":["import React from 'react';\nimport hoistStatics from 'hoist-non-react-statics';\nimport * as Modifiers from \"./modifiers\";\nimport { Scheme, ThemeManager } from \"../style\";\nimport forwardRef from \"./forwardRef\";\nimport UIComponent from \"./UIComponent\";\nconst EMPTY_MODIFIERS = {};\nfunction asBaseComponent(WrappedComponent, options = {}) {\n  class BaseComponent extends UIComponent {\n    state = {\n      error: false\n    };\n    componentDidMount() {\n      Scheme.addChangeListener(this.appearanceListener);\n    }\n    componentWillUnmount() {\n      Scheme.removeChangeListener(this.appearanceListener);\n    }\n    appearanceListener = () => {\n      // iOS 13 and above will trigger this call with the wrong colorScheme value. So just ignore returned colorScheme for now\n      // https://github.com/facebook/react-native/issues/28525\n      // this.setState({colorScheme: Appearance.getColorScheme()});\n      this.setState({\n        colorScheme: Scheme.getSchemeType()\n      });\n    };\n    static getThemeProps = (props, context) => {\n      return Modifiers.getThemeProps.call(WrappedComponent, props, context);\n    };\n    static getDerivedStateFromError(error) {\n      UIComponent.defaultProps?.onError?.(error, WrappedComponent.defaultProps);\n      return {\n        error: true\n      };\n    }\n    render() {\n      const themeProps = options.ignoreTheme ? this.props : BaseComponent.getThemeProps(this.props, this.context);\n      const modifiers = options.ignoreModifiers ? EMPTY_MODIFIERS : Modifiers.generateModifiersStyle(options.modifiersOptions, themeProps);\n      // TODO: omit original modifiers props (left, right, flex, etc..)\n      // Because they throws an error when being passed to RNView on Android\n      // @ts-expect-error\n      const {\n        forwardedRef,\n        ...others\n      } = themeProps;\n      return this.state.error && UIComponent.defaultProps?.renderError || <WrappedComponent {...others} modifiers={modifiers} ref={forwardedRef} />;\n    }\n  }\n\n  // Statics\n  hoistStatics(BaseComponent, WrappedComponent);\n  BaseComponent.displayName = WrappedComponent.displayName;\n  BaseComponent.propTypes = WrappedComponent.propTypes;\n  BaseComponent.defaultProps = WrappedComponent.defaultProps;\n  const ThemeContext = ThemeManager.getThemeContext();\n  if (ThemeContext) {\n    BaseComponent.contextType = ThemeContext;\n  }\n  return forwardRef(BaseComponent);\n}\nexport default asBaseComponent;"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,YAAY,MAAM,yBAAyB;AAClD,OAAO,KAAKC,SAAS;AACrB,SAASC,MAAM,EAAEC,YAAY;AAC7B,OAAOC,UAAU;AACjB,OAAOC,WAAW;AAAsB;AACxC,IAAMC,eAAe,GAAG,CAAC,CAAC;AAC1B,SAASC,eAAe,CAACC,gBAAgB,EAAgB;EAAA,IAAdC,OAAO,uEAAG,CAAC,CAAC;EAAA,IAC/CC,aAAa;IAAA;IAAA;IAAA;MAAA;MAAA;MAAA;QAAA;MAAA;MAAA;MAAA,MACjBC,KAAK,GAAG;QACNC,KAAK,EAAE;MACT,CAAC;MAAA,MAODC,kBAAkB,GAAG,YAAM;QAIzB,MAAKC,QAAQ,CAAC;UACZC,WAAW,EAAEb,MAAM,CAACc,aAAa;QACnC,CAAC,CAAC;MACJ,CAAC;MAAA;IAAA;IAAA;MAAA;MAAA,OAbD,6BAAoB;QAClBd,MAAM,CAACe,iBAAiB,CAAC,IAAI,CAACJ,kBAAkB,CAAC;MACnD;IAAC;MAAA;MAAA,OACD,gCAAuB;QACrBX,MAAM,CAACgB,oBAAoB,CAAC,IAAI,CAACL,kBAAkB,CAAC;MACtD;IAAC;MAAA;MAAA,OAkBD,kBAAS;QAAA;QACP,IAAMM,UAAU,GAAGV,OAAO,CAACW,WAAW,GAAG,IAAI,CAACC,KAAK,GAAGX,aAAa,CAACY,aAAa,CAAC,IAAI,CAACD,KAAK,EAAE,IAAI,CAACE,OAAO,CAAC;QAC3G,IAAMC,SAAS,GAAGf,OAAO,CAACgB,eAAe,GAAGnB,eAAe,GAAGL,SAAS,CAACyB,sBAAsB,CAACjB,OAAO,CAACkB,gBAAgB,EAAER,UAAU,CAAC;QAIpI,IACES,YAAY,GAEVT,UAAU,CAFZS,YAAY;UACTC,MAAM,4BACPV,UAAU;QACd,OAAO,IAAI,CAACR,KAAK,CAACC,KAAK,8BAAIP,WAAW,CAACyB,YAAY,qBAAxB,sBAA0BC,WAAW,KAAI,KAAC,gBAAgB,kCAAKF,MAAM;UAAE,SAAS,EAAEL,SAAU;UAAC,GAAG,EAAEI;QAAa,GAAG;MAC/I;IAAC;MAAA;MAAA,OAjBD,kCAAgChB,KAAK,EAAE;QAAA;QACrC,0BAAAP,WAAW,CAACyB,YAAY,qBAAxB,uBAA0BE,OAAO,oBAAjC,uBAA0BA,OAAO,CAAGpB,KAAK,EAAEJ,gBAAgB,CAACsB,YAAY,CAAC;QACzE,OAAO;UACLlB,KAAK,EAAE;QACT,CAAC;MACH;IAAC;IAAA;EAAA,EA1ByBP,WAAW;EAAjCK,aAAa,CAkBVY,aAAa,GAAG,UAACD,KAAK,EAAEE,OAAO,EAAK;IACzC,OAAOtB,SAAS,CAACqB,aAAa,CAACW,IAAI,CAACzB,gBAAgB,EAAEa,KAAK,EAAEE,OAAO,CAAC;EACvE,CAAC;EAsBHvB,YAAY,CAACU,aAAa,EAAEF,gBAAgB,CAAC;EAC7CE,aAAa,CAACwB,WAAW,GAAG1B,gBAAgB,CAAC0B,WAAW;EACxDxB,aAAa,CAACyB,SAAS,GAAG3B,gBAAgB,CAAC2B,SAAS;EACpDzB,aAAa,CAACoB,YAAY,GAAGtB,gBAAgB,CAACsB,YAAY;EAC1D,IAAMM,YAAY,GAAGjC,YAAY,CAACkC,eAAe,EAAE;EACnD,IAAID,YAAY,EAAE;IAChB1B,aAAa,CAAC4B,WAAW,GAAGF,YAAY;EAC1C;EACA,OAAOhC,UAAU,CAACM,aAAa,CAAC;AAClC;AACA,eAAeH,eAAe"},"metadata":{},"sourceType":"module"}