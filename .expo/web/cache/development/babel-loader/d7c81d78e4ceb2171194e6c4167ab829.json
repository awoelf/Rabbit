{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useState, useMemo, useCallback, useEffect } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Animated from \"react-native-web/dist/exports/Animated\";\nimport Easing from \"react-native-web/dist/exports/Easing\";\nimport LayoutAnimation from \"react-native-web/dist/exports/LayoutAnimation\";\nimport { Colors } from \"../../style\";\nimport View from \"../view\";\nimport TouchableOpacity from \"../touchableOpacity\";\nimport Button, { ButtonSize } from \"../button\";\nimport Card from \"../card\";\nimport { Constants, asBaseComponent } from \"../../commons/new\";\nimport { useDidUpdate } from \"../../hooks\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar PEEP = 8;\nvar DURATION = 300;\nvar MARGIN_BOTTOM = 24;\nvar buttonStartValue = 0.8;\nvar icon = require(\"./assets/arrow-down.png\");\nvar StackAggregator = function StackAggregator(props) {\n  var children = props.children,\n    containerStyle = props.containerStyle,\n    buttonProps = props.buttonProps,\n    _props$collapsed = props.collapsed,\n    collapsed = _props$collapsed === void 0 ? true : _props$collapsed,\n    disablePresses = props.disablePresses,\n    onItemPress = props.onItemPress,\n    contentContainerStyle = props.contentContainerStyle,\n    itemBorderRadius = props.itemBorderRadius,\n    onCollapseWillChange = props.onCollapseWillChange,\n    onCollapseChanged = props.onCollapseChanged;\n  var itemsCount = React.Children.count(children);\n  var _useState = useState(),\n    _useState2 = _slicedToArray(_useState, 2),\n    firstItemHeight = _useState2[0],\n    setFirstItemHeight = _useState2[1];\n  var _useState3 = useState(collapsed),\n    _useState4 = _slicedToArray(_useState3, 2),\n    isCollapsed = _useState4[0],\n    setIsCollapsed = _useState4[1];\n  useEffect(function () {\n    setIsCollapsed(collapsed);\n  }, [collapsed]);\n  useDidUpdate(function () {\n    onCollapseWillChange == null ? void 0 : onCollapseWillChange(isCollapsed);\n    animate();\n    onCollapseChanged == null ? void 0 : onCollapseChanged(isCollapsed);\n  }, [isCollapsed, onCollapseWillChange, onCollapseChanged]);\n  var animatedScale = new Animated.Value(isCollapsed ? buttonStartValue : 1);\n  var animatedOpacity = new Animated.Value(isCollapsed ? buttonStartValue : 1);\n  var animatedContentOpacity = useMemo(function () {\n    return new Animated.Value(isCollapsed ? 0 : 1);\n  }, [isCollapsed]);\n  var easeOut = Easing.bezier(0, 0, 0.58, 1);\n  var getItemScale = useCallback(function (index) {\n    if (isCollapsed) {\n      if (index === itemsCount - 2) {\n        return 0.95;\n      }\n      if (index === itemsCount - 1) {\n        return 0.9;\n      }\n    }\n    return 1;\n  }, [isCollapsed, itemsCount]);\n  var getAnimatedScales = useCallback(function () {\n    return React.Children.map(children, function (_item, index) {\n      return new Animated.Value(getItemScale(index));\n    });\n  }, [children, getItemScale]);\n  var animatedScaleArray = useMemo(function () {\n    return getAnimatedScales();\n  }, [getAnimatedScales]);\n  var animate = function animate() {\n    return Promise.all([animateValues(), animateCards()]);\n  };\n  var animateValues = function animateValues() {\n    var newValue = isCollapsed ? buttonStartValue : 1;\n    return new Promise(function (resolve) {\n      Animated.parallel([Animated.timing(animatedOpacity, {\n        duration: DURATION,\n        toValue: Number(newValue),\n        useNativeDriver: true\n      }), Animated.timing(animatedScale, {\n        toValue: Number(newValue),\n        easing: easeOut,\n        duration: DURATION,\n        useNativeDriver: true\n      }), Animated.timing(animatedContentOpacity, {\n        toValue: Number(isCollapsed ? 0 : 1),\n        easing: easeOut,\n        duration: DURATION,\n        useNativeDriver: true\n      })]).start(resolve);\n    });\n  };\n  var animateCards = function animateCards() {\n    var promises = [];\n    var _loop = function _loop(index) {\n      var newScale = getItemScale(index);\n      promises.push(new Promise(function (resolve) {\n        Animated.timing(animatedScaleArray[index], {\n          toValue: newScale,\n          easing: easeOut,\n          duration: DURATION,\n          useNativeDriver: true\n        }).start(resolve);\n      }));\n    };\n    for (var index = 0; index < itemsCount; index++) {\n      _loop(index);\n    }\n    return Promise.all(promises);\n  };\n  var close = function close() {\n    LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n    setIsCollapsed(true);\n  };\n  var open = function open() {\n    LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n    setIsCollapsed(false);\n  };\n  var getTop = function getTop(index) {\n    var start = 0;\n    if (index === itemsCount - 2) {\n      start += PEEP;\n    }\n    if (index === itemsCount - 1) {\n      start += PEEP * 2;\n    }\n    return start;\n  };\n  var getItemStyle = function getItemStyle(index) {\n    if (isCollapsed) {\n      return {\n        position: index !== 0 ? 'absolute' : undefined,\n        top: getTop(index)\n      };\n    }\n    return {\n      marginBottom: MARGIN_BOTTOM,\n      marginTop: index === 0 ? 40 : undefined\n    };\n  };\n  var touchableOpacityStyle = useMemo(function () {\n    return [styles.touchable, {\n      height: firstItemHeight ? firstItemHeight + PEEP * 2 : undefined,\n      zIndex: itemsCount\n    }];\n  }, [firstItemHeight, itemsCount]);\n  var _onItemPress = function _onItemPress(index) {\n    if (!disablePresses) {\n      onItemPress == null ? void 0 : onItemPress(index);\n    }\n  };\n  var onLayout = function onLayout(event) {\n    var height = event.nativeEvent.layout.height;\n    if (height) {\n      setFirstItemHeight(height);\n    }\n  };\n  var renderItem = function renderItem(item, index) {\n    return _jsx(Animated.View, {\n      onLayout: index === 0 ? onLayout : undefined,\n      style: [Constants.isIOS && styles.containerShadow, contentContainerStyle, getItemStyle(index), {\n        borderRadius: Constants.isIOS ? itemBorderRadius : undefined,\n        alignSelf: 'center',\n        zIndex: itemsCount - index,\n        transform: [{\n          scaleX: animatedScaleArray[index]\n        }],\n        width: Constants.screenWidth - 40,\n        height: isCollapsed ? firstItemHeight : undefined\n      }],\n      collapsable: false,\n      children: _jsx(Card, {\n        style: styles.card,\n        onPress: function onPress() {\n          return _onItemPress(index);\n        },\n        borderRadius: itemBorderRadius,\n        elevation: 5,\n        children: _jsx(Animated.View, {\n          style: index !== 0 ? {\n            opacity: animatedContentOpacity\n          } : undefined,\n          collapsable: false,\n          children: item\n        })\n      })\n    });\n  };\n  return _jsx(View, {\n    style: containerStyle,\n    children: _jsxs(View, {\n      style: styles.subContainer,\n      children: [_jsx(Animated.View, {\n        style: {\n          position: 'absolute',\n          right: 0,\n          opacity: animatedOpacity,\n          transform: [{\n            scale: animatedScale\n          }]\n        },\n        children: _jsx(Button, _objectSpread(_objectSpread({\n          label: 'Show less',\n          iconSource: icon,\n          link: true,\n          size: ButtonSize.small\n        }, buttonProps), {}, {\n          \"marginH-24\": true,\n          \"marginB-20\": true,\n          onPress: close,\n          style: styles.button\n        }))\n      }), React.Children.map(children, function (item, index) {\n        return renderItem(item, index);\n      }), isCollapsed && _jsx(TouchableOpacity, {\n        onPress: open,\n        activeOpacity: 1,\n        style: touchableOpacityStyle\n      })]\n    })\n  });\n};\nexport default asBaseComponent(StackAggregator);\nStackAggregator.displayName = 'StackAggregator';\nStackAggregator.defaultProps = {\n  collapsed: true,\n  disablePresses: false,\n  itemBorderRadius: 0\n};\nvar styles = StyleSheet.create({\n  subContainer: {\n    marginBottom: PEEP * 3\n  },\n  touchable: {\n    position: 'absolute',\n    width: '100%'\n  },\n  containerShadow: {\n    backgroundColor: Colors.white,\n    shadowColor: Colors.grey40,\n    shadowOpacity: 0.25,\n    shadowRadius: 12,\n    shadowOffset: {\n      height: 5,\n      width: 0\n    }\n  },\n  card: {\n    overflow: 'hidden',\n    flexShrink: 1,\n    backgroundColor: 'transparent'\n  },\n  button: {\n    zIndex: 100\n  }\n});","map":{"version":3,"names":["React","useState","useMemo","useCallback","useEffect","Colors","View","TouchableOpacity","Button","ButtonSize","Card","Constants","asBaseComponent","useDidUpdate","PEEP","DURATION","MARGIN_BOTTOM","buttonStartValue","icon","require","StackAggregator","props","children","containerStyle","buttonProps","collapsed","disablePresses","onItemPress","contentContainerStyle","itemBorderRadius","onCollapseWillChange","onCollapseChanged","itemsCount","Children","count","firstItemHeight","setFirstItemHeight","isCollapsed","setIsCollapsed","animate","animatedScale","Animated","Value","animatedOpacity","animatedContentOpacity","easeOut","Easing","bezier","getItemScale","index","getAnimatedScales","map","_item","animatedScaleArray","Promise","all","animateValues","animateCards","newValue","resolve","parallel","timing","duration","toValue","Number","useNativeDriver","easing","start","promises","newScale","push","close","LayoutAnimation","configureNext","Presets","easeInEaseOut","open","getTop","getItemStyle","position","undefined","top","marginBottom","marginTop","touchableOpacityStyle","styles","touchable","height","zIndex","_onItemPress","onLayout","event","nativeEvent","layout","renderItem","item","isIOS","containerShadow","borderRadius","alignSelf","transform","scaleX","width","screenWidth","card","opacity","subContainer","right","scale","small","button","displayName","defaultProps","StyleSheet","create","backgroundColor","white","shadowColor","grey40","shadowOpacity","shadowRadius","shadowOffset","overflow","flexShrink"],"sources":["C:/Users/Alex/Documents/development/Rabbit/node_modules/react-native-ui-lib/src/components/stackAggregator/index.js"],"sourcesContent":["import React, { useState, useMemo, useCallback, useEffect } from 'react';\nimport { StyleSheet, Animated, Easing, LayoutAnimation } from 'react-native';\nimport { Colors } from \"../../style\";\nimport View from \"../view\";\nimport TouchableOpacity from \"../touchableOpacity\";\nimport Button, { ButtonSize } from \"../button\";\nimport Card from \"../card\";\nimport { Constants, asBaseComponent } from \"../../commons/new\";\nimport { useDidUpdate } from \"../../hooks\";\nconst PEEP = 8;\nconst DURATION = 300;\nconst MARGIN_BOTTOM = 24;\nconst buttonStartValue = 0.8;\nconst icon = require(\"./assets/arrow-down.png\");\n/**\n * @description: Stack aggregator component\n * @modifiers: margin, padding\n * @example: https://github.com/wix/react-native-ui-lib/blob/master/demo/src/screens/componentScreens/StackAggregatorScreen.tsx\n */\nconst StackAggregator = props => {\n  const {\n    children,\n    containerStyle,\n    buttonProps,\n    collapsed = true,\n    disablePresses,\n    onItemPress,\n    contentContainerStyle,\n    itemBorderRadius,\n    onCollapseWillChange,\n    onCollapseChanged\n  } = props;\n  const itemsCount = React.Children.count(children);\n  const [firstItemHeight, setFirstItemHeight] = useState();\n  const [isCollapsed, setIsCollapsed] = useState(collapsed);\n  useEffect(() => {\n    setIsCollapsed(collapsed);\n  }, [collapsed]);\n  useDidUpdate(() => {\n    onCollapseWillChange?.(isCollapsed);\n    animate();\n    onCollapseChanged?.(isCollapsed);\n  }, [isCollapsed, onCollapseWillChange, onCollapseChanged]);\n\n  /** Animations */\n\n  const animatedScale = new Animated.Value(isCollapsed ? buttonStartValue : 1);\n  const animatedOpacity = new Animated.Value(isCollapsed ? buttonStartValue : 1);\n  const animatedContentOpacity = useMemo(() => {\n    return new Animated.Value(isCollapsed ? 0 : 1);\n  }, [isCollapsed]);\n  const easeOut = Easing.bezier(0, 0, 0.58, 1);\n  const getItemScale = useCallback(index => {\n    if (isCollapsed) {\n      if (index === itemsCount - 2) {\n        return 0.95;\n      }\n      if (index === itemsCount - 1) {\n        return 0.9;\n      }\n    }\n    return 1;\n  }, [isCollapsed, itemsCount]);\n  const getAnimatedScales = useCallback(() => {\n    return React.Children.map(children, (_item, index) => {\n      return new Animated.Value(getItemScale(index));\n    });\n  }, [children, getItemScale]);\n  const animatedScaleArray = useMemo(() => {\n    return getAnimatedScales();\n  }, [getAnimatedScales]);\n  const animate = () => {\n    return Promise.all([animateValues(), animateCards()]);\n  };\n  const animateValues = () => {\n    const newValue = isCollapsed ? buttonStartValue : 1;\n    return new Promise(resolve => {\n      Animated.parallel([Animated.timing(animatedOpacity, {\n        duration: DURATION,\n        toValue: Number(newValue),\n        useNativeDriver: true\n      }), Animated.timing(animatedScale, {\n        toValue: Number(newValue),\n        easing: easeOut,\n        duration: DURATION,\n        useNativeDriver: true\n      }), Animated.timing(animatedContentOpacity, {\n        toValue: Number(isCollapsed ? 0 : 1),\n        easing: easeOut,\n        duration: DURATION,\n        useNativeDriver: true\n      })]).start(resolve);\n    });\n  };\n  const animateCards = () => {\n    const promises = [];\n    for (let index = 0; index < itemsCount; index++) {\n      const newScale = getItemScale(index);\n      promises.push(new Promise(resolve => {\n        Animated.timing(animatedScaleArray[index], {\n          toValue: newScale,\n          easing: easeOut,\n          duration: DURATION,\n          useNativeDriver: true\n        }).start(resolve);\n      }));\n    }\n    return Promise.all(promises);\n  };\n\n  /** Actions */\n\n  const close = () => {\n    LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n    setIsCollapsed(true);\n  };\n  const open = () => {\n    LayoutAnimation.configureNext(LayoutAnimation.Presets.easeInEaseOut);\n    setIsCollapsed(false);\n  };\n\n  /** Styles */\n\n  const getTop = index => {\n    let start = 0;\n    if (index === itemsCount - 2) {\n      start += PEEP;\n    }\n    if (index === itemsCount - 1) {\n      start += PEEP * 2;\n    }\n    return start;\n  };\n  const getItemStyle = index => {\n    if (isCollapsed) {\n      return {\n        position: index !== 0 ? 'absolute' : undefined,\n        top: getTop(index)\n      };\n    }\n    return {\n      marginBottom: MARGIN_BOTTOM,\n      marginTop: index === 0 ? 40 : undefined\n    };\n  };\n  const touchableOpacityStyle = useMemo(() => {\n    return [styles.touchable, {\n      height: firstItemHeight ? firstItemHeight + PEEP * 2 : undefined,\n      zIndex: itemsCount\n    }];\n  }, [firstItemHeight, itemsCount]);\n\n  /** Events */\n\n  const _onItemPress = index => {\n    if (!disablePresses) {\n      onItemPress?.(index);\n    }\n  };\n  const onLayout = event => {\n    const height = event.nativeEvent.layout.height;\n    if (height) {\n      setFirstItemHeight(height);\n    }\n  };\n\n  /** Renders */\n\n  const renderItem = (item, index) => {\n    return <Animated.View onLayout={index === 0 ? onLayout : undefined} style={[Constants.isIOS && styles.containerShadow, contentContainerStyle,\n    //@ts-expect-error 'position' doesn't match AnimatedInterpolation type\n    getItemStyle(index), {\n      borderRadius: Constants.isIOS ? itemBorderRadius : undefined,\n      alignSelf: 'center',\n      zIndex: itemsCount - index,\n      transform: [{\n        scaleX: animatedScaleArray[index]\n      }],\n      width: Constants.screenWidth - 40,\n      height: isCollapsed ? firstItemHeight : undefined\n    }]} collapsable={false}>\n        <Card style={styles.card} onPress={() => _onItemPress(index)} borderRadius={itemBorderRadius} elevation={5}>\n          <Animated.View style={index !== 0 ? {\n          opacity: animatedContentOpacity\n        } : undefined} collapsable={false}>\n            {item}\n          </Animated.View>\n        </Card>\n      </Animated.View>;\n  };\n  return <View style={containerStyle}>\n      <View style={styles.subContainer}>\n        <Animated.View style={{\n        position: 'absolute',\n        right: 0,\n        opacity: animatedOpacity,\n        transform: [{\n          scale: animatedScale\n        }]\n      }}>\n          <Button label={'Show less'} iconSource={icon} link size={ButtonSize.small} {...buttonProps} marginH-24 marginB-20 onPress={close} style={styles.button} />\n        </Animated.View>\n\n        {React.Children.map(children, (item, index) => {\n        return renderItem(item, index);\n      })}\n\n        {isCollapsed && <TouchableOpacity onPress={open} activeOpacity={1} style={touchableOpacityStyle} />}\n      </View>\n    </View>;\n};\nexport default asBaseComponent(StackAggregator);\nStackAggregator.displayName = 'StackAggregator';\nStackAggregator.defaultProps = {\n  collapsed: true,\n  disablePresses: false,\n  itemBorderRadius: 0\n};\nconst styles = StyleSheet.create({\n  subContainer: {\n    marginBottom: PEEP * 3\n  },\n  touchable: {\n    position: 'absolute',\n    width: '100%'\n  },\n  containerShadow: {\n    backgroundColor: Colors.white,\n    shadowColor: Colors.grey40,\n    shadowOpacity: 0.25,\n    shadowRadius: 12,\n    shadowOffset: {\n      height: 5,\n      width: 0\n    }\n  },\n  card: {\n    overflow: 'hidden',\n    flexShrink: 1,\n    backgroundColor: 'transparent'\n  },\n  button: {\n    zIndex: 100\n  }\n});"],"mappings":";;;;AAAA,OAAOA,KAAK,IAAIC,QAAQ,EAAEC,OAAO,EAAEC,WAAW,EAAEC,SAAS,QAAQ,OAAO;AAAC;AAAA;AAAA;AAAA;AAEzE,SAASC,MAAM;AACf,OAAOC,IAAI;AACX,OAAOC,gBAAgB;AACvB,OAAOC,MAAM,IAAIC,UAAU;AAC3B,OAAOC,IAAI;AACX,SAASC,SAAS,EAAEC,eAAe;AACnC,SAASC,YAAY;AAAsB;AAAA;AAC3C,IAAMC,IAAI,GAAG,CAAC;AACd,IAAMC,QAAQ,GAAG,GAAG;AACpB,IAAMC,aAAa,GAAG,EAAE;AACxB,IAAMC,gBAAgB,GAAG,GAAG;AAC5B,IAAMC,IAAI,GAAGC,OAAO,2BAA2B;AAM/C,IAAMC,eAAe,GAAG,SAAlBA,eAAe,CAAGC,KAAK,EAAI;EAC/B,IACEC,QAAQ,GAUND,KAAK,CAVPC,QAAQ;IACRC,cAAc,GASZF,KAAK,CATPE,cAAc;IACdC,WAAW,GAQTH,KAAK,CARPG,WAAW;IAAA,mBAQTH,KAAK,CAPPI,SAAS;IAATA,SAAS,iCAAG,IAAI;IAChBC,cAAc,GAMZL,KAAK,CANPK,cAAc;IACdC,WAAW,GAKTN,KAAK,CALPM,WAAW;IACXC,qBAAqB,GAInBP,KAAK,CAJPO,qBAAqB;IACrBC,gBAAgB,GAGdR,KAAK,CAHPQ,gBAAgB;IAChBC,oBAAoB,GAElBT,KAAK,CAFPS,oBAAoB;IACpBC,iBAAiB,GACfV,KAAK,CADPU,iBAAiB;EAEnB,IAAMC,UAAU,GAAGhC,KAAK,CAACiC,QAAQ,CAACC,KAAK,CAACZ,QAAQ,CAAC;EACjD,gBAA8CrB,QAAQ,EAAE;IAAA;IAAjDkC,eAAe;IAAEC,kBAAkB;EAC1C,iBAAsCnC,QAAQ,CAACwB,SAAS,CAAC;IAAA;IAAlDY,WAAW;IAAEC,cAAc;EAClClC,SAAS,CAAC,YAAM;IACdkC,cAAc,CAACb,SAAS,CAAC;EAC3B,CAAC,EAAE,CAACA,SAAS,CAAC,CAAC;EACfZ,YAAY,CAAC,YAAM;IACjBiB,oBAAoB,oBAApBA,oBAAoB,CAAGO,WAAW,CAAC;IACnCE,OAAO,EAAE;IACTR,iBAAiB,oBAAjBA,iBAAiB,CAAGM,WAAW,CAAC;EAClC,CAAC,EAAE,CAACA,WAAW,EAAEP,oBAAoB,EAAEC,iBAAiB,CAAC,CAAC;EAI1D,IAAMS,aAAa,GAAG,IAAIC,QAAQ,CAACC,KAAK,CAACL,WAAW,GAAGpB,gBAAgB,GAAG,CAAC,CAAC;EAC5E,IAAM0B,eAAe,GAAG,IAAIF,QAAQ,CAACC,KAAK,CAACL,WAAW,GAAGpB,gBAAgB,GAAG,CAAC,CAAC;EAC9E,IAAM2B,sBAAsB,GAAG1C,OAAO,CAAC,YAAM;IAC3C,OAAO,IAAIuC,QAAQ,CAACC,KAAK,CAACL,WAAW,GAAG,CAAC,GAAG,CAAC,CAAC;EAChD,CAAC,EAAE,CAACA,WAAW,CAAC,CAAC;EACjB,IAAMQ,OAAO,GAAGC,MAAM,CAACC,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;EAC5C,IAAMC,YAAY,GAAG7C,WAAW,CAAC,UAAA8C,KAAK,EAAI;IACxC,IAAIZ,WAAW,EAAE;MACf,IAAIY,KAAK,KAAKjB,UAAU,GAAG,CAAC,EAAE;QAC5B,OAAO,IAAI;MACb;MACA,IAAIiB,KAAK,KAAKjB,UAAU,GAAG,CAAC,EAAE;QAC5B,OAAO,GAAG;MACZ;IACF;IACA,OAAO,CAAC;EACV,CAAC,EAAE,CAACK,WAAW,EAAEL,UAAU,CAAC,CAAC;EAC7B,IAAMkB,iBAAiB,GAAG/C,WAAW,CAAC,YAAM;IAC1C,OAAOH,KAAK,CAACiC,QAAQ,CAACkB,GAAG,CAAC7B,QAAQ,EAAE,UAAC8B,KAAK,EAAEH,KAAK,EAAK;MACpD,OAAO,IAAIR,QAAQ,CAACC,KAAK,CAACM,YAAY,CAACC,KAAK,CAAC,CAAC;IAChD,CAAC,CAAC;EACJ,CAAC,EAAE,CAAC3B,QAAQ,EAAE0B,YAAY,CAAC,CAAC;EAC5B,IAAMK,kBAAkB,GAAGnD,OAAO,CAAC,YAAM;IACvC,OAAOgD,iBAAiB,EAAE;EAC5B,CAAC,EAAE,CAACA,iBAAiB,CAAC,CAAC;EACvB,IAAMX,OAAO,GAAG,SAAVA,OAAO,GAAS;IACpB,OAAOe,OAAO,CAACC,GAAG,CAAC,CAACC,aAAa,EAAE,EAAEC,YAAY,EAAE,CAAC,CAAC;EACvD,CAAC;EACD,IAAMD,aAAa,GAAG,SAAhBA,aAAa,GAAS;IAC1B,IAAME,QAAQ,GAAGrB,WAAW,GAAGpB,gBAAgB,GAAG,CAAC;IACnD,OAAO,IAAIqC,OAAO,CAAC,UAAAK,OAAO,EAAI;MAC5BlB,QAAQ,CAACmB,QAAQ,CAAC,CAACnB,QAAQ,CAACoB,MAAM,CAAClB,eAAe,EAAE;QAClDmB,QAAQ,EAAE/C,QAAQ;QAClBgD,OAAO,EAAEC,MAAM,CAACN,QAAQ,CAAC;QACzBO,eAAe,EAAE;MACnB,CAAC,CAAC,EAAExB,QAAQ,CAACoB,MAAM,CAACrB,aAAa,EAAE;QACjCuB,OAAO,EAAEC,MAAM,CAACN,QAAQ,CAAC;QACzBQ,MAAM,EAAErB,OAAO;QACfiB,QAAQ,EAAE/C,QAAQ;QAClBkD,eAAe,EAAE;MACnB,CAAC,CAAC,EAAExB,QAAQ,CAACoB,MAAM,CAACjB,sBAAsB,EAAE;QAC1CmB,OAAO,EAAEC,MAAM,CAAC3B,WAAW,GAAG,CAAC,GAAG,CAAC,CAAC;QACpC6B,MAAM,EAAErB,OAAO;QACfiB,QAAQ,EAAE/C,QAAQ;QAClBkD,eAAe,EAAE;MACnB,CAAC,CAAC,CAAC,CAAC,CAACE,KAAK,CAACR,OAAO,CAAC;IACrB,CAAC,CAAC;EACJ,CAAC;EACD,IAAMF,YAAY,GAAG,SAAfA,YAAY,GAAS;IACzB,IAAMW,QAAQ,GAAG,EAAE;IAAC,kCAC6B;MAC/C,IAAMC,QAAQ,GAAGrB,YAAY,CAACC,KAAK,CAAC;MACpCmB,QAAQ,CAACE,IAAI,CAAC,IAAIhB,OAAO,CAAC,UAAAK,OAAO,EAAI;QACnClB,QAAQ,CAACoB,MAAM,CAACR,kBAAkB,CAACJ,KAAK,CAAC,EAAE;UACzCc,OAAO,EAAEM,QAAQ;UACjBH,MAAM,EAAErB,OAAO;UACfiB,QAAQ,EAAE/C,QAAQ;UAClBkD,eAAe,EAAE;QACnB,CAAC,CAAC,CAACE,KAAK,CAACR,OAAO,CAAC;MACnB,CAAC,CAAC,CAAC;IACL,CAAC;IAVD,KAAK,IAAIV,KAAK,GAAG,CAAC,EAAEA,KAAK,GAAGjB,UAAU,EAAEiB,KAAK,EAAE;MAAA;IAAA;IAW/C,OAAOK,OAAO,CAACC,GAAG,CAACa,QAAQ,CAAC;EAC9B,CAAC;EAID,IAAMG,KAAK,GAAG,SAARA,KAAK,GAAS;IAClBC,eAAe,CAACC,aAAa,CAACD,eAAe,CAACE,OAAO,CAACC,aAAa,CAAC;IACpErC,cAAc,CAAC,IAAI,CAAC;EACtB,CAAC;EACD,IAAMsC,IAAI,GAAG,SAAPA,IAAI,GAAS;IACjBJ,eAAe,CAACC,aAAa,CAACD,eAAe,CAACE,OAAO,CAACC,aAAa,CAAC;IACpErC,cAAc,CAAC,KAAK,CAAC;EACvB,CAAC;EAID,IAAMuC,MAAM,GAAG,SAATA,MAAM,CAAG5B,KAAK,EAAI;IACtB,IAAIkB,KAAK,GAAG,CAAC;IACb,IAAIlB,KAAK,KAAKjB,UAAU,GAAG,CAAC,EAAE;MAC5BmC,KAAK,IAAIrD,IAAI;IACf;IACA,IAAImC,KAAK,KAAKjB,UAAU,GAAG,CAAC,EAAE;MAC5BmC,KAAK,IAAIrD,IAAI,GAAG,CAAC;IACnB;IACA,OAAOqD,KAAK;EACd,CAAC;EACD,IAAMW,YAAY,GAAG,SAAfA,YAAY,CAAG7B,KAAK,EAAI;IAC5B,IAAIZ,WAAW,EAAE;MACf,OAAO;QACL0C,QAAQ,EAAE9B,KAAK,KAAK,CAAC,GAAG,UAAU,GAAG+B,SAAS;QAC9CC,GAAG,EAAEJ,MAAM,CAAC5B,KAAK;MACnB,CAAC;IACH;IACA,OAAO;MACLiC,YAAY,EAAElE,aAAa;MAC3BmE,SAAS,EAAElC,KAAK,KAAK,CAAC,GAAG,EAAE,GAAG+B;IAChC,CAAC;EACH,CAAC;EACD,IAAMI,qBAAqB,GAAGlF,OAAO,CAAC,YAAM;IAC1C,OAAO,CAACmF,MAAM,CAACC,SAAS,EAAE;MACxBC,MAAM,EAAEpD,eAAe,GAAGA,eAAe,GAAGrB,IAAI,GAAG,CAAC,GAAGkE,SAAS;MAChEQ,MAAM,EAAExD;IACV,CAAC,CAAC;EACJ,CAAC,EAAE,CAACG,eAAe,EAAEH,UAAU,CAAC,CAAC;EAIjC,IAAMyD,YAAY,GAAG,SAAfA,YAAY,CAAGxC,KAAK,EAAI;IAC5B,IAAI,CAACvB,cAAc,EAAE;MACnBC,WAAW,oBAAXA,WAAW,CAAGsB,KAAK,CAAC;IACtB;EACF,CAAC;EACD,IAAMyC,QAAQ,GAAG,SAAXA,QAAQ,CAAGC,KAAK,EAAI;IACxB,IAAMJ,MAAM,GAAGI,KAAK,CAACC,WAAW,CAACC,MAAM,CAACN,MAAM;IAC9C,IAAIA,MAAM,EAAE;MACVnD,kBAAkB,CAACmD,MAAM,CAAC;IAC5B;EACF,CAAC;EAID,IAAMO,UAAU,GAAG,SAAbA,UAAU,CAAIC,IAAI,EAAE9C,KAAK,EAAK;IAClC,OAAO,KAAC,QAAQ,CAAC,IAAI;MAAC,QAAQ,EAAEA,KAAK,KAAK,CAAC,GAAGyC,QAAQ,GAAGV,SAAU;MAAC,KAAK,EAAE,CAACrE,SAAS,CAACqF,KAAK,IAAIX,MAAM,CAACY,eAAe,EAAErE,qBAAqB,EAE5IkD,YAAY,CAAC7B,KAAK,CAAC,EAAE;QACnBiD,YAAY,EAAEvF,SAAS,CAACqF,KAAK,GAAGnE,gBAAgB,GAAGmD,SAAS;QAC5DmB,SAAS,EAAE,QAAQ;QACnBX,MAAM,EAAExD,UAAU,GAAGiB,KAAK;QAC1BmD,SAAS,EAAE,CAAC;UACVC,MAAM,EAAEhD,kBAAkB,CAACJ,KAAK;QAClC,CAAC,CAAC;QACFqD,KAAK,EAAE3F,SAAS,CAAC4F,WAAW,GAAG,EAAE;QACjChB,MAAM,EAAElD,WAAW,GAAGF,eAAe,GAAG6C;MAC1C,CAAC,CAAE;MAAC,WAAW,EAAE,KAAM;MAAA,UACnB,KAAC,IAAI;QAAC,KAAK,EAAEK,MAAM,CAACmB,IAAK;QAAC,OAAO,EAAE;UAAA,OAAMf,YAAY,CAACxC,KAAK,CAAC;QAAA,CAAC;QAAC,YAAY,EAAEpB,gBAAiB;QAAC,SAAS,EAAE,CAAE;QAAA,UACzG,KAAC,QAAQ,CAAC,IAAI;UAAC,KAAK,EAAEoB,KAAK,KAAK,CAAC,GAAG;YACpCwD,OAAO,EAAE7D;UACX,CAAC,GAAGoC,SAAU;UAAC,WAAW,EAAE,KAAM;UAAA,UAC7Be;QAAI;MACS;IACX,EACO;EACpB,CAAC;EACD,OAAO,KAAC,IAAI;IAAC,KAAK,EAAExE,cAAe;IAAA,UAC/B,MAAC,IAAI;MAAC,KAAK,EAAE8D,MAAM,CAACqB,YAAa;MAAA,WAC/B,KAAC,QAAQ,CAAC,IAAI;QAAC,KAAK,EAAE;UACtB3B,QAAQ,EAAE,UAAU;UACpB4B,KAAK,EAAE,CAAC;UACRF,OAAO,EAAE9D,eAAe;UACxByD,SAAS,EAAE,CAAC;YACVQ,KAAK,EAAEpE;UACT,CAAC;QACH,CAAE;QAAA,UACE,KAAC,MAAM;UAAC,KAAK,EAAE,WAAY;UAAC,UAAU,EAAEtB,IAAK;UAAC,IAAI;UAAC,IAAI,EAAET,UAAU,CAACoG;QAAM,GAAKrF,WAAW;UAAE,kBAAU;UAAC,kBAAU;UAAC,OAAO,EAAE+C,KAAM;UAAC,KAAK,EAAEc,MAAM,CAACyB;QAAO;MAAG,EAC5I,EAEf9G,KAAK,CAACiC,QAAQ,CAACkB,GAAG,CAAC7B,QAAQ,EAAE,UAACyE,IAAI,EAAE9C,KAAK,EAAK;QAC/C,OAAO6C,UAAU,CAACC,IAAI,EAAE9C,KAAK,CAAC;MAChC,CAAC,CAAC,EAECZ,WAAW,IAAI,KAAC,gBAAgB;QAAC,OAAO,EAAEuC,IAAK;QAAC,aAAa,EAAE,CAAE;QAAC,KAAK,EAAEQ;MAAsB,EAAG;IAAA;EAC9F,EACF;AACX,CAAC;AACD,eAAexE,eAAe,CAACQ,eAAe,CAAC;AAC/CA,eAAe,CAAC2F,WAAW,GAAG,iBAAiB;AAC/C3F,eAAe,CAAC4F,YAAY,GAAG;EAC7BvF,SAAS,EAAE,IAAI;EACfC,cAAc,EAAE,KAAK;EACrBG,gBAAgB,EAAE;AACpB,CAAC;AACD,IAAMwD,MAAM,GAAG4B,UAAU,CAACC,MAAM,CAAC;EAC/BR,YAAY,EAAE;IACZxB,YAAY,EAAEpE,IAAI,GAAG;EACvB,CAAC;EACDwE,SAAS,EAAE;IACTP,QAAQ,EAAE,UAAU;IACpBuB,KAAK,EAAE;EACT,CAAC;EACDL,eAAe,EAAE;IACfkB,eAAe,EAAE9G,MAAM,CAAC+G,KAAK;IAC7BC,WAAW,EAAEhH,MAAM,CAACiH,MAAM;IAC1BC,aAAa,EAAE,IAAI;IACnBC,YAAY,EAAE,EAAE;IAChBC,YAAY,EAAE;MACZlC,MAAM,EAAE,CAAC;MACTe,KAAK,EAAE;IACT;EACF,CAAC;EACDE,IAAI,EAAE;IACJkB,QAAQ,EAAE,QAAQ;IAClBC,UAAU,EAAE,CAAC;IACbR,eAAe,EAAE;EACnB,CAAC;EACDL,MAAM,EAAE;IACNtB,MAAM,EAAE;EACV;AACF,CAAC,CAAC"},"metadata":{},"sourceType":"module"}