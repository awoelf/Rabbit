{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nvar _excluded = [\"testID\", \"index\", \"lazy\", \"renderLoading\", \"lazyLoadTime\"];\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nimport React, { useCallback, useContext, useState, useMemo } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Reanimated, { useAnimatedStyle, useAnimatedReaction, runOnJS } from 'react-native-reanimated';\nimport TabBarContext from \"./TabBarContext\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function TabPage(_ref) {\n  var testID = _ref.testID,\n    index = _ref.index,\n    lazy = _ref.lazy,\n    renderLoading = _ref.renderLoading,\n    _ref$lazyLoadTime = _ref.lazyLoadTime,\n    lazyLoadTime = _ref$lazyLoadTime === void 0 ? 100 : _ref$lazyLoadTime,\n    props = _objectWithoutProperties(_ref, _excluded);\n  var _useContext = useContext(TabBarContext),\n    currentPage = _useContext.currentPage,\n    asCarousel = _useContext.asCarousel,\n    containerWidth = _useContext.containerWidth;\n  var _useState = useState(!lazy),\n    _useState2 = _slicedToArray(_useState, 2),\n    shouldLoad = _useState2[0],\n    setLoaded = _useState2[1];\n  var lazyLoad = useCallback(function () {\n    if (lazy && !shouldLoad) {\n      setTimeout(function () {\n        setLoaded(true);\n      }, lazyLoadTime);\n    }\n  }, [lazy, shouldLoad]);\n  useAnimatedReaction(function () {\n    var _f = function _f() {\n      return currentPage.value;\n    };\n    _f._closure = {\n      currentPage: currentPage\n    };\n    _f.asString = \"function _f(){const{currentPage}=jsThis._closure;{return currentPage.value;}}\";\n    _f.__workletHash = 16845019634419;\n    _f.__location = \"C:\\\\Users\\\\Alex\\\\Documents\\\\development\\\\Rabbit\\\\node_modules\\\\react-native-ui-lib\\\\src\\\\components\\\\tabController\\\\TabPage.js (33:22)\";\n    return _f;\n  }(), function () {\n    var _f = function _f(currentPage) {\n      var isActive = currentPage === index;\n      if (isActive) {\n        runOnJS(lazyLoad)();\n      }\n    };\n    _f._closure = {\n      index: index,\n      runOnJS: runOnJS,\n      lazyLoad: lazyLoad\n    };\n    _f.asString = \"function _f(currentPage){const{index,runOnJS,lazyLoad}=jsThis._closure;{const isActive=currentPage===index;if(isActive){runOnJS(lazyLoad)();}}}\";\n    _f.__workletHash = 1408064423786;\n    _f.__location = \"C:\\\\Users\\\\Alex\\\\Documents\\\\development\\\\Rabbit\\\\node_modules\\\\react-native-ui-lib\\\\src\\\\components\\\\tabController\\\\TabPage.js (35:5)\";\n    return _f;\n  }(), [currentPage, lazyLoad]);\n  var animatedPageStyle = useAnimatedStyle(function () {\n    var _f = function _f() {\n      var isActive = Math.round(currentPage.value) === index;\n      return {\n        opacity: isActive || asCarousel ? 1 : 0,\n        zIndex: isActive || asCarousel ? 1 : 0\n      };\n    };\n    _f._closure = {\n      currentPage: currentPage,\n      index: index,\n      asCarousel: asCarousel\n    };\n    _f.asString = \"function _f(){const{currentPage,index,asCarousel}=jsThis._closure;{const isActive=Math.round(currentPage.value)===index;return{opacity:isActive||asCarousel?1:0,zIndex:isActive||asCarousel?1:0};}}\";\n    _f.__workletHash = 10844401194419;\n    _f.__location = \"C:\\\\Users\\\\Alex\\\\Documents\\\\development\\\\Rabbit\\\\node_modules\\\\react-native-ui-lib\\\\src\\\\components\\\\tabController\\\\TabPage.js (52:45)\";\n    _f.__optimalization = 2;\n    return _f;\n  }());\n  var style = useMemo(function () {\n    return [!asCarousel && styles.page, animatedPageStyle, {\n      width: asCarousel ? containerWidth : undefined\n    }];\n  }, [asCarousel, animatedPageStyle, containerWidth]);\n  return _jsxs(Reanimated.View, {\n    style: style,\n    testID: testID,\n    children: [!shouldLoad && (renderLoading == null ? void 0 : renderLoading()), shouldLoad && props.children]\n  });\n}\nvar styles = StyleSheet.create({\n  page: _objectSpread({}, StyleSheet.absoluteFillObject)\n});","map":{"version":3,"names":["React","useCallback","useContext","useState","useMemo","Reanimated","useAnimatedStyle","useAnimatedReaction","runOnJS","TabBarContext","TabPage","testID","index","lazy","renderLoading","lazyLoadTime","props","currentPage","asCarousel","containerWidth","shouldLoad","setLoaded","lazyLoad","setTimeout","value","isActive","animatedPageStyle","Math","round","opacity","zIndex","style","styles","page","width","undefined","children","StyleSheet","create","absoluteFillObject"],"sources":["C:/Users/Alex/Documents/development/Rabbit/node_modules/react-native-ui-lib/src/components/tabController/TabPage.js"],"sourcesContent":["import React, { useCallback, useContext, useState, useMemo } from 'react';\nimport { StyleSheet } from 'react-native';\nimport Reanimated, { useAnimatedStyle, useAnimatedReaction, runOnJS } from 'react-native-reanimated';\n// import {Freeze} from 'react-freeze';\nimport TabBarContext from \"./TabBarContext\";\n/**\n * @description: TabController's TabPage\n * @example: https://github.com/wix/react-native-ui-lib/blob/master/demo/src/screens/componentScreens/TabControllerScreen/index.tsx\n */\nexport default function TabPage({\n  testID,\n  index,\n  lazy,\n  renderLoading,\n  lazyLoadTime = 100,\n  ...props\n}) {\n  const {\n    currentPage,\n    asCarousel,\n    containerWidth\n  } = useContext(TabBarContext);\n  const [shouldLoad, setLoaded] = useState(!lazy);\n  // const [focused, setFocused] = useState(false);\n\n  const lazyLoad = useCallback(() => {\n    if (lazy && !shouldLoad) {\n      setTimeout(() => {\n        setLoaded(true);\n      }, lazyLoadTime);\n    }\n  }, [lazy, shouldLoad]);\n  useAnimatedReaction(() => {\n    return currentPage.value;\n  }, (currentPage /* , previousPage */) => {\n    const isActive = currentPage === index;\n    // const wasActive = previousPage === index;\n    // const nearActive = asCarousel && (currentPage - 1 === index || currentPage + 1 === index);\n    // const wasNearActive =\n    //     asCarousel && previousPage !== null && (previousPage - 1 === index || previousPage + 1 === index);\n\n    if (isActive) {\n      runOnJS(lazyLoad)();\n    }\n\n    // if (isActive || nearActive) {\n    //   runOnJS(setFocused)(true);\n    // } else if (wasActive || wasNearActive) {\n    //   runOnJS(setFocused)(false);\n    // }\n  }, [currentPage, lazyLoad]);\n  const animatedPageStyle = useAnimatedStyle(() => {\n    const isActive = Math.round(currentPage.value) === index;\n    return {\n      opacity: isActive || asCarousel ? 1 : 0,\n      zIndex: isActive || asCarousel ? 1 : 0\n    };\n  });\n  const style = useMemo(() => {\n    return [!asCarousel && styles.page, animatedPageStyle, {\n      width: asCarousel ? containerWidth : undefined\n    }];\n  }, [asCarousel, animatedPageStyle, containerWidth]);\n  return <Reanimated.View style={style} testID={testID}>\n      {!shouldLoad && renderLoading?.()}\n      {shouldLoad && props.children}\n      {/* <Freeze freeze={!shouldLoad || !focused}>{props.children}</Freeze> */}\n    </Reanimated.View>;\n}\nconst styles = StyleSheet.create({\n  page: {\n    ...StyleSheet.absoluteFillObject\n  }\n});"],"mappings":";;;;;;AAAA,OAAOA,KAAK,IAAIC,WAAW,EAAEC,UAAU,EAAEC,QAAQ,EAAEC,OAAO,QAAQ,OAAO;AAAC;AAE1E,OAAOC,UAAU,IAAIC,gBAAgB,EAAEC,mBAAmB,EAAEC,OAAO,QAAQ,yBAAyB;AAEpG,OAAOC,aAAa;AAAwB;AAK5C,eAAe,SAASC,OAAO,OAO5B;EAAA,IANDC,MAAM,QAANA,MAAM;IACNC,KAAK,QAALA,KAAK;IACLC,IAAI,QAAJA,IAAI;IACJC,aAAa,QAAbA,aAAa;IAAA,yBACbC,YAAY;IAAZA,YAAY,kCAAG,GAAG;IACfC,KAAK;EAER,kBAIId,UAAU,CAACO,aAAa,CAAC;IAH3BQ,WAAW,eAAXA,WAAW;IACXC,UAAU,eAAVA,UAAU;IACVC,cAAc,eAAdA,cAAc;EAEhB,gBAAgChB,QAAQ,CAAC,CAACU,IAAI,CAAC;IAAA;IAAxCO,UAAU;IAAEC,SAAS;EAG5B,IAAMC,QAAQ,GAAGrB,WAAW,CAAC,YAAM;IACjC,IAAIY,IAAI,IAAI,CAACO,UAAU,EAAE;MACvBG,UAAU,CAAC,YAAM;QACfF,SAAS,CAAC,IAAI,CAAC;MACjB,CAAC,EAAEN,YAAY,CAAC;IAClB;EACF,CAAC,EAAE,CAACF,IAAI,EAAEO,UAAU,CAAC,CAAC;EACtBb,mBAAmB;IAAA,uBAAO;MACxB,OAAOU,WAAW,CAACO,KAAK;IAC1B,CAAC;IAAA;MAAA,aAhCMP;IAAW;IAAA;IAAA;IAAA;IAAA;EAAA;IAAA,qBAgCdA,WAAW,EAA0B;MACvC,IAAMQ,QAAQ,GAAGR,WAAW,KAAKL,KAAK;MAMtC,IAAIa,QAAQ,EAAE;QACZjB,OAAO,CAACc,QAAQ,CAAC,EAAE;MACrB;IAOF,CAAC;IAAA;MAAA,OAhDgCV,KAAK;MAAA,SAOpCJ,OAAO;MAAA,UAACc;IAAQ;IAAA;IAAA;IAAA;IAAA;EAAA,KAyCf,CAACL,WAAW,EAAEK,QAAQ,CAAC,CAAC;EAC3B,IAAMI,iBAAiB,GAAGpB,gBAAgB;IAAA,uBAAO;MAC/C,IAAMmB,QAAQ,GAAGE,IAAI,CAACC,KAAK,CAACX,WAAW,CAACO,KAAK,CAAC,KAAKZ,KAAK;MACxD,OAAO;QACLiB,OAAO,EAAEJ,QAAQ,IAAIP,UAAU,GAAG,CAAC,GAAG,CAAC;QACvCY,MAAM,EAAEL,QAAQ,IAAIP,UAAU,GAAG,CAAC,GAAG;MACvC,CAAC;IACH,CAAC;IAAA;MAAA,aAvD2BD,WAAW;MAAA,OAAYL,KAAK;MAAA,YAGlCM;IAAU;IAAA;IAAA;IAAA;IAAA;IAAA;EAAA,IAoD9B;EACF,IAAMa,KAAK,GAAG3B,OAAO,CAAC,YAAM;IAC1B,OAAO,CAAC,CAACc,UAAU,IAAIc,MAAM,CAACC,IAAI,EAAEP,iBAAiB,EAAE;MACrDQ,KAAK,EAAEhB,UAAU,GAAGC,cAAc,GAAGgB;IACvC,CAAC,CAAC;EACJ,CAAC,EAAE,CAACjB,UAAU,EAAEQ,iBAAiB,EAAEP,cAAc,CAAC,CAAC;EACnD,OAAO,MAAC,UAAU,CAAC,IAAI;IAAC,KAAK,EAAEY,KAAM;IAAC,MAAM,EAAEpB,MAAO;IAAA,WAChD,CAACS,UAAU,KAAIN,aAAa,oBAAbA,aAAa,EAAI,GAChCM,UAAU,IAAIJ,KAAK,CAACoB,QAAQ;EAAA,EAEb;AACtB;AACA,IAAMJ,MAAM,GAAGK,UAAU,CAACC,MAAM,CAAC;EAC/BL,IAAI,oBACCI,UAAU,CAACE,kBAAkB;AAEpC,CAAC,CAAC"},"metadata":{},"sourceType":"module"}