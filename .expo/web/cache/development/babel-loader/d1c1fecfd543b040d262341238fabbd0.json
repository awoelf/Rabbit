{"ast":null,"code":"import _endsWith from \"lodash/endsWith\";\nimport _toUpper from \"lodash/toUpper\";\nimport _each from \"lodash/each\";\nimport _take from \"lodash/take\";\nimport _filter from \"lodash/filter\";\nimport _split from \"lodash/split\";\nimport _flow from \"lodash/flow\";\nimport _isString from \"lodash/isString\";\nimport URL from 'url-parse';\nimport Colors from \"../style/colors\";\nexport function hashStringToNumber(str) {\n  var hash = 5381;\n  if (str) {\n    for (var i = 0; i < str.length; i++) {\n      var char = str.charCodeAt(i);\n      hash = (hash << 5) + hash + char;\n    }\n  }\n  return hash;\n}\nexport function getAvatarColors() {\n  return [Colors.blue20, Colors.cyan20, Colors.green20, Colors.yellow20, Colors.orange20, Colors.red20, Colors.purple20, Colors.violet20];\n}\nexport function getColorById(id) {\n  var avatarColors = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : getAvatarColors();\n  if (!id) {\n    return avatarColors[0];\n  }\n  var hashedId = hashStringToNumber(id);\n  var colorIndex = Math.abs(hashedId % avatarColors.length);\n  return avatarColors[colorIndex];\n}\nexport function getInitials(name) {\n  var limit = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 2;\n  var initials = '';\n  if (name && _isString(name)) {\n    var nameSplitted = _flow(function (name) {\n      return _split(name, /\\s+/g);\n    }, function (words) {\n      return _filter(words, function (word) {\n        return word.length > 0;\n      });\n    }, function (words) {\n      return _take(words, limit);\n    })(name);\n    _each(nameSplitted, function (str) {\n      initials += str[0];\n    });\n  }\n  return _toUpper(initials);\n}\nexport function getBackgroundColor(name, avatarColors, hashFunction, defaultColor) {\n  if (!name || !avatarColors || !hashFunction) {\n    return defaultColor;\n  }\n  var hash = hashFunction(name);\n  var index = Math.abs(hash % avatarColors.length);\n  return avatarColors[index];\n}\nexport function isGravatarUrl(url) {\n  var _URL = new URL(url),\n    hostname = _URL.hostname,\n    pathname = _URL.pathname;\n  return _split(hostname, '.').includes('gravatar') && pathname.startsWith('/avatar/');\n}\nexport function isBlankGravatarUrl(url) {\n  return isGravatarUrl(url) && _endsWith(url, '?d=blank');\n}\nexport function patchGravatarUrl(gravatarUrl) {\n  var url = new URL(gravatarUrl, true);\n  var query = url.query;\n  query.d = '404';\n  delete query.default;\n  url.set('query', query);\n  return url.toString();\n}","map":{"version":3,"names":["_endsWith","_toUpper","_each","_take","_filter","_split","_flow","_isString","URL","Colors","hashStringToNumber","str","hash","i","length","char","charCodeAt","getAvatarColors","blue20","cyan20","green20","yellow20","orange20","red20","purple20","violet20","getColorById","id","avatarColors","hashedId","colorIndex","Math","abs","getInitials","name","limit","initials","nameSplitted","words","word","getBackgroundColor","hashFunction","defaultColor","index","isGravatarUrl","url","hostname","pathname","includes","startsWith","isBlankGravatarUrl","patchGravatarUrl","gravatarUrl","query","d","default","set","toString"],"sources":["C:/Users/Alex/Documents/development/Rabbit/node_modules/react-native-ui-lib/src/helpers/AvatarHelper.js"],"sourcesContent":["import _endsWith from \"lodash/endsWith\";\nimport _toUpper from \"lodash/toUpper\";\nimport _each from \"lodash/each\";\nimport _take from \"lodash/take\";\nimport _filter from \"lodash/filter\";\nimport _split from \"lodash/split\";\nimport _flow from \"lodash/flow\";\nimport _isString from \"lodash/isString\";\nimport URL from 'url-parse';\nimport Colors from \"../style/colors\";\nexport function hashStringToNumber(str) {\n  let hash = 5381;\n  if (str) {\n    for (let i = 0; i < str.length; i++) {\n      const char = str.charCodeAt(i);\n      hash = (hash << 5) + hash + char; /* hash * 33 + c */ // eslint-disable-line\n    }\n  }\n\n  return hash;\n}\nexport function getAvatarColors() {\n  return [Colors.blue20, Colors.cyan20, Colors.green20, Colors.yellow20, Colors.orange20, Colors.red20, Colors.purple20, Colors.violet20];\n}\nexport function getColorById(id, avatarColors = getAvatarColors()) {\n  if (!id) {\n    return avatarColors[0];\n  }\n  const hashedId = hashStringToNumber(id);\n  const colorIndex = Math.abs(hashedId % avatarColors.length);\n  return avatarColors[colorIndex];\n}\nexport function getInitials(name, limit = 2) {\n  let initials = '';\n  if (name && _isString(name)) {\n    const nameSplitted = _flow(name => _split(name, /\\s+/g), words => _filter(words, word => word.length > 0), words => _take(words, limit))(name);\n    _each(nameSplitted, str => {\n      initials += str[0];\n    });\n  }\n  return _toUpper(initials);\n}\nexport function getBackgroundColor(name, avatarColors, hashFunction, defaultColor) {\n  if (!name || !avatarColors || !hashFunction) {\n    return defaultColor;\n  }\n  const hash = hashFunction(name);\n  const index = Math.abs(hash % avatarColors.length);\n  return avatarColors[index];\n}\nexport function isGravatarUrl(url) {\n  const {\n    hostname,\n    pathname\n  } = new URL(url);\n  return _split(hostname, '.').includes('gravatar') && pathname.startsWith('/avatar/');\n}\nexport function isBlankGravatarUrl(url) {\n  return isGravatarUrl(url) && _endsWith(url, '?d=blank');\n}\nexport function patchGravatarUrl(gravatarUrl) {\n  const url = new URL(gravatarUrl, true);\n  const {\n    query\n  } = url;\n  query.d = '404';\n  delete query.default;\n  url.set('query', query);\n  return url.toString();\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}