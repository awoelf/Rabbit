{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport React, { useEffect, useState } from 'react';\nimport { Button, View, Text, TouchableOpacity, TextField, Icon } from 'react-native-ui-lib';\nimport { useMutation } from '@apollo/client';\nimport { LOGIN } from \"../../utils/mutations\";\nimport Auth from \"../../utils/auth\";\nimport Home from \"../Home\";\nimport UserProfile from \"./UserProfile\";\nimport { logIn } from \"../../styles/styles\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nexport default function Login(props) {\n  var _useState = useState(''),\n    _useState2 = _slicedToArray(_useState, 2),\n    email = _useState2[0],\n    setEmail = _useState2[1];\n  var _useState3 = useState(''),\n    _useState4 = _slicedToArray(_useState3, 2),\n    password = _useState4[0],\n    setPassword = _useState4[1];\n  var _useMutation = useMutation(LOGIN),\n    _useMutation2 = _slicedToArray(_useMutation, 2),\n    login = _useMutation2[0],\n    _useMutation2$ = _useMutation2[1],\n    error = _useMutation2$.error,\n    data = _useMutation2$.data;\n  var loginHandler = function () {\n    var _ref = _asyncToGenerator(function* (event) {\n      try {\n        var mutationResponse = yield login({\n          variables: {\n            email: email,\n            password: password\n          }\n        });\n        var token = mutationResponse.data.login.token;\n        Auth.login(token);\n        props.navigation.navigate('Home');\n      } catch (e) {\n        console.log(e, 'error here');\n      }\n    });\n    return function loginHandler(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n  return _jsxs(View, {\n    \"flex-1\": true,\n    children: [_jsxs(View, {\n      row: true,\n      center: true,\n      \"flex-2\": true,\n      children: [_jsx(Text, {\n        style: logIn.header,\n        children: \"Rabbit\"\n      }), _jsx(Icon, {\n        source: require(\"../../assets/icon.png\"),\n        size: 35\n      })]\n    }), _jsxs(View, {\n      \"marginH-30\": true,\n      \"flex-1\": true,\n      children: [_jsx(Text, {\n        style: logIn.text,\n        center: true,\n        children: \"Log in to your Rabbit account\"\n      }), _jsx(TextField, {\n        migrate: true,\n        style: logIn.textField,\n        placeholder: 'Email',\n        name: 'email',\n        type: 'email',\n        id: 'email',\n        onChangeText: setEmail\n      }), _jsx(TextField, {\n        migrate: true,\n        style: logIn.textField,\n        placeholder: 'Password',\n        name: 'password',\n        secureTextEntry: true,\n        id: 'pwd',\n        onChangeText: setPassword\n      }), _jsx(View, {\n        center: true,\n        children: _jsx(Button, {\n          disabled: !email || !password,\n          style: logIn.button,\n          onPress: loginHandler,\n          center: true,\n          children: _jsx(Text, {\n            style: logIn.text,\n            children: \"Log in\"\n          })\n        })\n      })]\n    }), _jsxs(View, {\n      \"flex-3\": true,\n      centerH: true,\n      bottom: true,\n      children: [_jsx(Text, {\n        style: logIn.text,\n        children: \"Don't have an account?\"\n      }), _jsx(TouchableOpacity, {\n        onPress: function onPress() {\n          return props.navigation.navigate('Register');\n        },\n        children: _jsx(Text, {\n          style: logIn.link,\n          children: \"Sign Up\"\n        })\n      })]\n    })]\n  });\n}","map":{"version":3,"names":["React","useEffect","useState","Button","View","Text","TouchableOpacity","TextField","Icon","useMutation","LOGIN","Auth","Home","UserProfile","logIn","Login","props","email","setEmail","password","setPassword","login","error","data","loginHandler","event","mutationResponse","variables","token","navigation","navigate","e","console","log","header","require","text","textField","button","link"],"sources":["C:/Users/Alex/Documents/development/Rabbit/src/screens/User/Login.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Button, View, Text, TouchableOpacity, TextField, Icon } from 'react-native-ui-lib';\r\nimport { useMutation } from '@apollo/client';\r\nimport { LOGIN } from '../../utils/mutations';\r\nimport Auth from '../../utils/auth';\r\n\r\nimport Home from '../Home';\r\nimport UserProfile from './UserProfile';\r\n\r\n// Styles and assets\r\nimport { logIn } from '../../styles/styles';\r\n\r\nexport default function Login(props) {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [login, { error, data }] = useMutation(LOGIN);\r\n\r\n  const loginHandler = async (event) => {\r\n    // event.preventDefault();\r\n    try {\r\n      const mutationResponse = await login({\r\n        variables: { email: email, password: password },\r\n      });\r\n      const token = mutationResponse.data.login.token;\r\n      Auth.login(token);\r\n      props.navigation.navigate('Home');\r\n    } catch (e) {\r\n      console.log(e, 'error here');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <View flex-1>\r\n      <View row center flex-2>\r\n        <Text style={logIn.header}>Rabbit</Text>\r\n        <Icon source={require('../../assets/icon.png')} size={35} />\r\n      </View>\r\n      <View marginH-30 flex-1>\r\n        <Text style={logIn.text} center>Log in to your Rabbit account</Text>\r\n        <TextField\r\n          migrate\r\n          style={logIn.textField}\r\n          placeholder={'Email'}\r\n          name={'email'}\r\n          type={'email'}\r\n          id={'email'}\r\n          onChangeText={setEmail}\r\n        />\r\n        <TextField\r\n          migrate\r\n          style={logIn.textField}\r\n          placeholder={'Password'}\r\n          name={'password'}\r\n          secureTextEntry={true}\r\n          id={'pwd'}\r\n          onChangeText={setPassword}\r\n        />\r\n        <View center>\r\n          <Button disabled={!email || !password} style={logIn.button} onPress={loginHandler} center>\r\n            <Text style={logIn.text}>Log in</Text>\r\n          </Button>\r\n        </View>\r\n      </View>\r\n      <View flex-3 centerH bottom>\r\n        <Text style={logIn.text}>\r\n          Don't have an account?\r\n        </Text>\r\n        <TouchableOpacity onPress={() => props.navigation.navigate('Register')}>\r\n          <Text style={logIn.link}>\r\n            Sign Up\r\n          </Text>\r\n        </TouchableOpacity>\r\n      </View>\r\n      {/* <TouchableOpacity onPress={() => props.navigation.navigate(\"forgetpassword\")}>\r\n                <Text  >  Forget Password   </Text>\r\n            </TouchableOpacity> */}\r\n    </View>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,MAAM,EAAEC,IAAI,EAAEC,IAAI,EAAEC,gBAAgB,EAAEC,SAAS,EAAEC,IAAI,QAAQ,qBAAqB;AAC3F,SAASC,WAAW,QAAQ,gBAAgB;AAC5C,SAASC,KAAK;AACd,OAAOC,IAAI;AAEX,OAAOC,IAAI;AACX,OAAOC,WAAW;AAGlB,SAASC,KAAK;AAA8B;AAAA;AAE5C,eAAe,SAASC,KAAK,CAACC,KAAK,EAAE;EACnC,gBAA0Bd,QAAQ,CAAC,EAAE,CAAC;IAAA;IAA/Be,KAAK;IAAEC,QAAQ;EACtB,iBAAgChB,QAAQ,CAAC,EAAE,CAAC;IAAA;IAArCiB,QAAQ;IAAEC,WAAW;EAC5B,mBAAiCX,WAAW,CAACC,KAAK,CAAC;IAAA;IAA5CW,KAAK;IAAA;IAAIC,KAAK,kBAALA,KAAK;IAAEC,IAAI,kBAAJA,IAAI;EAE3B,IAAMC,YAAY;IAAA,6BAAG,WAAOC,KAAK,EAAK;MAEpC,IAAI;QACF,IAAMC,gBAAgB,SAASL,KAAK,CAAC;UACnCM,SAAS,EAAE;YAAEV,KAAK,EAAEA,KAAK;YAAEE,QAAQ,EAAEA;UAAS;QAChD,CAAC,CAAC;QACF,IAAMS,KAAK,GAAGF,gBAAgB,CAACH,IAAI,CAACF,KAAK,CAACO,KAAK;QAC/CjB,IAAI,CAACU,KAAK,CAACO,KAAK,CAAC;QACjBZ,KAAK,CAACa,UAAU,CAACC,QAAQ,CAAC,MAAM,CAAC;MACnC,CAAC,CAAC,OAAOC,CAAC,EAAE;QACVC,OAAO,CAACC,GAAG,CAACF,CAAC,EAAE,YAAY,CAAC;MAC9B;IACF,CAAC;IAAA,gBAZKP,YAAY;MAAA;IAAA;EAAA,GAYjB;EAED,OACE,MAAC,IAAI;IAAC,cAAM;IAAA,WACV,MAAC,IAAI;MAAC,GAAG;MAAC,MAAM;MAAC,cAAM;MAAA,WACrB,KAAC,IAAI;QAAC,KAAK,EAAEV,KAAK,CAACoB,MAAO;QAAA,UAAC;MAAM,EAAO,EACxC,KAAC,IAAI;QAAC,MAAM,EAAEC,OAAO,yBAA0B;QAAC,IAAI,EAAE;MAAG,EAAG;IAAA,EACvD,EACP,MAAC,IAAI;MAAC,kBAAU;MAAC,cAAM;MAAA,WACrB,KAAC,IAAI;QAAC,KAAK,EAAErB,KAAK,CAACsB,IAAK;QAAC,MAAM;QAAA,UAAC;MAA6B,EAAO,EACpE,KAAC,SAAS;QACR,OAAO;QACP,KAAK,EAAEtB,KAAK,CAACuB,SAAU;QACvB,WAAW,EAAE,OAAQ;QACrB,IAAI,EAAE,OAAQ;QACd,IAAI,EAAE,OAAQ;QACd,EAAE,EAAE,OAAQ;QACZ,YAAY,EAAEnB;MAAS,EACvB,EACF,KAAC,SAAS;QACR,OAAO;QACP,KAAK,EAAEJ,KAAK,CAACuB,SAAU;QACvB,WAAW,EAAE,UAAW;QACxB,IAAI,EAAE,UAAW;QACjB,eAAe,EAAE,IAAK;QACtB,EAAE,EAAE,KAAM;QACV,YAAY,EAAEjB;MAAY,EAC1B,EACF,KAAC,IAAI;QAAC,MAAM;QAAA,UACV,KAAC,MAAM;UAAC,QAAQ,EAAE,CAACH,KAAK,IAAI,CAACE,QAAS;UAAC,KAAK,EAAEL,KAAK,CAACwB,MAAO;UAAC,OAAO,EAAEd,YAAa;UAAC,MAAM;UAAA,UACvF,KAAC,IAAI;YAAC,KAAK,EAAEV,KAAK,CAACsB,IAAK;YAAA,UAAC;UAAM;QAAO;MAC/B,EACJ;IAAA,EACF,EACP,MAAC,IAAI;MAAC,cAAM;MAAC,OAAO;MAAC,MAAM;MAAA,WACzB,KAAC,IAAI;QAAC,KAAK,EAAEtB,KAAK,CAACsB,IAAK;QAAA,UAAC;MAEzB,EAAO,EACP,KAAC,gBAAgB;QAAC,OAAO,EAAE;UAAA,OAAMpB,KAAK,CAACa,UAAU,CAACC,QAAQ,CAAC,UAAU,CAAC;QAAA,CAAC;QAAA,UACrE,KAAC,IAAI;UAAC,KAAK,EAAEhB,KAAK,CAACyB,IAAK;UAAA,UAAC;QAEzB;MAAO,EACU;IAAA,EACd;EAAA,EAIF;AAEX"},"metadata":{},"sourceType":"module"}